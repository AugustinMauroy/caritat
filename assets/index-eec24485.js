var Ee=Object.defineProperty;var Ae=(t,e,n)=>e in t?Ee(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var le=(t,e,n)=>(Ae(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(l){if(l.ep)return;l.ep=!0;const o=n(l);fetch(l.href,o)}})();function R(){}function Se(t){return!!t&&(typeof t=="object"||typeof t=="function")&&typeof t.then=="function"}function ge(t){return t()}function de(){return Object.create(null)}function D(t){t.forEach(ge)}function we(t){return typeof t=="function"}function q(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Pe(t){return Object.keys(t).length===0}function $(t,e){t.appendChild(e)}function p(t,e,n){t.insertBefore(e,n||null)}function h(t){t.parentNode&&t.parentNode.removeChild(t)}function g(t){return document.createElement(t)}function P(t){return document.createTextNode(t)}function S(){return P(" ")}function te(){return P("")}function ne(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function C(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Re(t){return Array.from(t.childNodes)}function re(t,e){e=""+e,t.data!==e&&(t.data=e)}let V;function U(t){V=t}function ke(){if(!V)throw new Error("Function called outside component initialization");return V}function ve(t){ke().$$.before_update.push(t)}const O=[],me=[];let j=[];const he=[],Le=Promise.resolve();let se=!1;function Ue(){se||(se=!0,Le.then(ae))}function ce(t){j.push(t)}const ie=new Set;let N=0;function ae(){if(N!==0)return;const t=V;do{try{for(;N<O.length;){const e=O[N];N++,U(e),Ie(e.$$)}}catch(e){throw O.length=0,N=0,e}for(U(null),O.length=0,N=0;me.length;)me.pop()();for(let e=0;e<j.length;e+=1){const n=j[e];ie.has(n)||(ie.add(n),n())}j.length=0}while(O.length);for(;he.length;)he.pop()();se=!1,ie.clear(),U(t)}function Ie(t){if(t.fragment!==null){t.update(),D(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ce)}}function Fe(t){const e=[],n=[];j.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),j=e}const Z=new Set;let B;function Be(){B={r:0,c:[],p:B}}function Te(){B.r||D(B.c),B=B.p}function K(t,e){t&&t.i&&(Z.delete(t),t.i(e))}function z(t,e,n,r){if(t&&t.o){if(Z.has(t))return;Z.add(t),B.c.push(()=>{Z.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function F(t,e){const n=e.token={};function r(l,o,u,i){if(e.token!==n)return;e.resolved=i;let c=e.ctx;u!==void 0&&(c=c.slice(),c[u]=i);const s=l&&(e.current=l)(c);let d=!1;e.block&&(e.blocks?e.blocks.forEach((a,f)=>{f!==o&&a&&(Be(),z(a,1,1,()=>{e.blocks[f]===a&&(e.blocks[f]=null)}),Te())}):e.block.d(1),s.c(),K(s,1),s.m(e.mount(),e.anchor),d=!0),e.block=s,e.blocks&&(e.blocks[o]=s),d&&ae()}if(Se(t)){const l=ke();if(t.then(o=>{U(l),r(e.then,1,e.value,o),U(null)},o=>{if(U(l),r(e.catch,2,e.error,o),U(null),!e.hasCatch)throw o}),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,t),!0;e.resolved=t}}function fe(t,e,n){const r=e.slice(),{resolved:l}=t;t.current===t.then&&(r[t.value]=l),t.current===t.catch&&(r[t.error]=l),t.block.p(r,n)}function Q(t){t&&t.c()}function G(t,e,n){const{fragment:r,after_update:l}=t.$$;r&&r.m(e,n),ce(()=>{const o=t.$$.on_mount.map(ge).filter(we);t.$$.on_destroy?t.$$.on_destroy.push(...o):D(o),t.$$.on_mount=[]}),l.forEach(ce)}function H(t,e){const n=t.$$;n.fragment!==null&&(Fe(n.after_update),D(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Ne(t,e){t.$$.dirty[0]===-1&&(O.push(t),Ue(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function W(t,e,n,r,l,o,u,i=[-1]){const c=V;U(t);const s=t.$$={fragment:null,ctx:[],props:o,update:R,not_equal:l,bound:de(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:de(),dirty:i,skip_bound:!1,root:e.target||c.$$.root};u&&u(s.root);let d=!1;if(s.ctx=n?n(t,e.props||{},(a,f,...y)=>{const E=y.length?y[0]:f;return s.ctx&&l(s.ctx[a],s.ctx[a]=E)&&(!s.skip_bound&&s.bound[a]&&s.bound[a](E),d&&Ne(t,a)),f}):[],s.update(),d=!0,D(s.before_update),s.fragment=r?r(s.ctx):!1,e.target){if(e.hydrate){const a=Re(e.target);s.fragment&&s.fragment.l(a),a.forEach(h)}else s.fragment&&s.fragment.c();e.intro&&K(t.$$.fragment),G(t,e.target,e.anchor),ae()}U(c)}class Y{constructor(){le(this,"$$");le(this,"$$set")}$destroy(){H(this,1),this.$destroy=R}$on(e,n){if(!we(n))return R;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const l=r.indexOf(n);l!==-1&&r.splice(l,1)}}$set(e){this.$$set&&!Pe(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const xe="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(xe);const Oe=/^\/([^/]+)\/([^/]+)\/pull\/(\d+)\/?$/,Me=/\npreferences:[^\n\S]*(#[^\n]*)?\n/,$e=new Map;async function Ke(t,e){const n=new URL(t);if(n.origin!=="https://github.com")throw new Error("Only GitHub PR URLs are supported on the web UI. Use the CLI instead.");const r=Oe.exec(n.pathname);if(r==null)throw new Error("Only GitHub PR URLs are supported on the web UI. Use the CLI instead.");const[,l,o,u]=r,i=await fetch("https://api.github.com/graphql",{...e,method:"POST",body:JSON.stringify({variables:{prid:Number(u),owner:l,repo:o},query:`query PR($prid: Int!, $owner: String!, $repo: String!) {
        repository(owner: $owner, name: $repo) {
          pullRequest(number: $prid) {
            commits(first: 1) {
              nodes {
                commit {
                  oid
                }
              }
            }
            headRef {
              name
              repository { url }
            }
            closed
            merged
          }
        }
      }
`})}).then(_=>_.ok?_.json():Promise.reject(new Error(`Fetch error: ${_.status} ${_.statusText}`,{cause:_})));if(i.error)throw new Error("Unable to get required information for the vote PR",{cause:i.error});const{closed:c,merged:s,commits:d,headRef:a}=i.data.repository.pullRequest;if(c)throw new Error("The PR is marked as closed");if(s)throw new Error("The PR is marked as merged");const{oid:f}=d.nodes[0].commit,{name:y,repository:{url:E}}=a,{files:v}=await fetch(`https://api.github.com/repos/${l}/${o}/commits/${f}`,e).then(_=>_.ok?_.json():Promise.reject(new Error(`Fetch error: ${_.status} ${_.statusText}`,{cause:_})));if((v==null?void 0:v.length)!==3)throw new Error("That PR does not look like a vote PR");const A=v.find(_=>_.filename.endsWith("/vote.yml")),w=v.find(_=>_.filename.endsWith("/ballot.yml")),k=v.find(_=>_.filename.endsWith("/public.pem"));if(!A||!w||!k)throw new Error("That PR does not look like a vote PR");return $e.set(t,`${E}/new/${y}/${A.filename.replace(/vote\.yml$/,"")}`),{voteFile:A,ballotFile:w,publicKeyFile:k}}function pe(t){return $e.get(t)}function je(t){let e=t.length,n;for(;e!=0;)n=Math.floor(Math.random()*e),e--,[t[e],t[n]]=[t[n],t[e]];return t}async function ze(t,e){const n={...e,headers:{...e==null?void 0:e.headers,Accept:"application/vnd.github.raw"}};try{const{voteFile:r,ballotFile:l,publicKeyFile:o}=await Ke(t,e),u=/^\+canShuffleCandidates:\s*true$/m.test(r.patch);return[fetch(l.contents_url,n).then(i=>i.ok?i.text():Promise.reject(new Error(`Fetch error: ${i.status} ${i.statusText}`))).then(u?i=>{const c=Me.exec(i);if(c==null)return console.warn("Cannot find the list of candidates to shuffle, ignoring..."),i;const s=c.index+c[0].length-1,d=[];let a,f,y=s;for(;;){if(f=y+1,y=i.indexOf(`
`,f),y===-1){f!==i.length&&(a+=i.slice(f-1));break}if(i[f]!==" "||i[f+1]!==" ")break;i[f+2]==="-"&&(a&&d.push(a),a=""),a+=i.slice(f-1,y)}return a&&d.push(a),i.slice(0,s)+je(d).join("")+`
`+i.slice(f)}:void 0),fetch(o.contents_url,n).then(i=>i.ok?i.arrayBuffer():Promise.reject(new Error(`Fetch error: ${i.status} ${i.statusText}`)))]}catch(r){const l=Promise.reject(r);return[l,l]}}let ue;function Ge({url:t,username:e,token:n},r){const l=e&&n?{headers:{Authorization:`Basic ${btoa(`${e}:${n}`)}`}}:void 0,o=t+(l==null?void 0:l.headers.Authorization);ue!==o&&(ue=o,ze(t,l).then(r,u=>(ue=null,r(u))))}function He(t){var l;let e,n=(((l=t[6])==null?void 0:l.message)??t[6])+"",r;return{c(){e=P("An error occurred: "),r=P(n)},m(o,u){p(o,e,u),p(o,r,u)},p(o,u){var i;u&1&&n!==(n=(((i=o[6])==null?void 0:i.message)??o[6])+"")&&re(r,n)},d(o){o&&(h(e),h(r))}}}function Ve(t){let e,n,r,l,o,u,i,c,s,d,a,f,y,E,v,A,w={ctx:t,current:null,token:null,hasCatch:!0,pending:We,then:qe,catch:De,error:6};return F(o=t[2],w),{c(){e=g("textarea"),r=S(),l=g("div"),w.block.c(),u=S(),i=g("button"),i.textContent="Copy to clipboard",c=S(),s=g("p"),d=P("Cast a vote by pasting this on a "),a=g("a"),f=P("new file on the vote branch"),E=P("."),e.readOnly=!0,e.value=n=t[5],C(i,"type","button"),C(a,"href",y=pe(t[1])),C(a,"target","_blank")},m(k,_){p(k,e,_),p(k,r,_),p(k,l,_),w.block.m(l,w.anchor=null),w.mount=()=>l,w.anchor=null,p(k,u,_),p(k,i,_),p(k,c,_),p(k,s,_),$(s,d),$(s,a),$(a,f),$(s,E),v||(A=ne(i,"click",t[4]),v=!0)},p(k,_){t=k,_&1&&n!==(n=t[5])&&(e.value=n),w.ctx=t,_&4&&o!==(o=t[2])&&F(o,w)||fe(w,t,_),_&2&&y!==(y=pe(t[1]))&&C(a,"href",y)},d(k){k&&(h(e),h(r),h(l),h(u),h(i),h(c),h(s)),w.block.d(),w.token=null,w=null,v=!1,A()}}}function De(t){let e,n=t[3]&&_e(t);return{c(){n&&n.c(),e=te()},m(r,l){n&&n.m(r,l),p(r,e,l)},p(r,l){r[3]?n?n.p(r,l):(n=_e(r),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(r){r&&h(e),n&&n.d(r)}}}function _e(t){var l;let e,n=(((l=t[6])==null?void 0:l.message)??t[6])+"",r;return{c(){e=P("An error occurred: "),r=P(n)},m(o,u){p(o,e,u),p(o,r,u)},p(o,u){var i;u&4&&n!==(n=(((i=o[6])==null?void 0:i.message)??o[6])+"")&&re(r,n)},d(o){o&&(h(e),h(r))}}}function qe(t){let e;return{c(){e=P("Copied to the clipboard!")},m(n,r){p(n,e,r)},p:R,d(n){n&&h(e)}}}function We(t){let e;return{c(){e=P("Copying to the Clipboard…")},m(n,r){p(n,e,r)},p:R,d(n){n&&h(e)}}}function Ye(t){let e;return{c(){e=g("textarea"),e.readOnly=!0,e.value="Encrypting data… "},m(n,r){p(n,e,r)},p:R,d(n){n&&h(e)}}}function Je(t){let e,n,r,l,o={ctx:t,current:null,token:null,hasCatch:!0,pending:Ye,then:Ve,catch:He,value:5,error:6};return F(l=t[0],o),{c(){e=g("summary"),e.textContent="Get encrypted ballot",n=S(),r=te(),o.block.c()},m(u,i){p(u,e,i),p(u,n,i),p(u,r,i),o.block.m(u,o.anchor=i),o.mount=()=>r.parentNode,o.anchor=r},p(u,[i]){t=u,o.ctx=t,i&1&&l!==(l=t[0])&&F(l,o)||fe(o,t,i)},i:R,o:R,d(u){u&&(h(e),h(n),h(r)),o.block.d(u),o.token=null,o=null}}}function Qe(t,e,n){let{encryptDataPromise:r}=e,{url:l}=e,o,u;function i(c){n(2,o=r.then(s=>navigator.clipboard.writeText(s))),n(3,u=c!=null)}return ve(i),t.$$set=c=>{"encryptDataPromise"in c&&n(0,r=c.encryptDataPromise),"url"in c&&n(1,l=c.url)},[r,l,o,u,i]}class Xe extends Y{constructor(e){super(),W(this,e,Qe,Je,q,{encryptDataPromise:0,url:1})}}const Ce={name:"RSA-OAEP",hash:"SHA-256"},M={name:"AES-CBC",length:256,saltSize:8},x={name:"PBKDF2",hash:"SHA-256",iterations:1e5,keySize:32,ivSize:16},Ze=crypto,{subtle:I}=crypto;async function et(t,e,...n){const r=await I.importKey("raw",t,x.name,!1,["deriveBits"]),l=await I.deriveBits({...x,salt:e},r,8*(x.ivSize+x.keySize)),o=await I.importKey("raw",new Uint8Array(l,0,x.keySize),M,!1,n),u=new Uint8Array(l,x.keySize);return{key:o,iv:u}}const tt=new TextDecoder;function nt(t){const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let r=0,l=t.length;r<l;r++)n[r]=t.charCodeAt(r);return e}const ee="-----BEGIN P";function rt(t){const e=ArrayBuffer.isView(t),n=new DataView(e?t.buffer:t,e?t.byteOffset:0,ee.length);for(let r=0;r<ee.length;r++)if(ee.charCodeAt(r)!==n.getUint8(r))return!1;return!0}function ot(t,e,n){let r;if(typeof e=="string"?e.startsWith(ee):rt(e)){typeof e!="string"&&(e=tt.decode(e));const l=e.split("-----",3)[2].replace(/\s+/g,""),o=atob(l);r=nt(o)}else r=e;return I.importKey(t,r,Ce,!0,n)}function lt(t,e){return ot(e?"pkcs8":"spki",t,[e?"decrypt":"encrypt"])}const X=[83,97,108,116,101,100,95,95];async function it(t){const e=await I.exportKey("raw",await I.generateKey(M,!0,["encrypt"])),n=Ze.getRandomValues(new Uint8Array(M.saltSize)),{iv:r,key:l}=await et(e,n,"encrypt"),o=await I.encrypt({...M,iv:r},l,t),u=new Uint8Array(X.length+M.saltSize+o.byteLength);return u.set(X),u.set(n,X.length),u.set(new Uint8Array(o),X.length+M.saltSize),{secret:e,saltedCiphertext:u}}async function ut(t,e){const n=await lt(e),{saltedCiphertext:r,secret:l}=await it(t);return{encryptedSecret:await I.encrypt({name:Ce.name},n,l),saltedCiphertext:r}}function ye(t){let e="";const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=t.byteLength,l=r%3,o=r-l;let u,i,c,s,d;for(let a=0;a<o;a=a+3)d=t[a]<<16|t[a+1]<<8|t[a+2],u=(d&16515072)>>18,i=(d&258048)>>12,c=(d&4032)>>6,s=d&63,e+=n[u]+n[i]+n[c]+n[s];return l==1?(d=t[o],u=(d&252)>>2,i=(d&3)<<4,e+=n[u]+n[i]+"=="):l==2&&(d=t[o]<<8|t[o+1],u=(d&64512)>>10,i=(d&1008)>>4,c=(d&15)<<2,e+=n[u]+n[i]+n[c]+"="),e}function st(t){var c;let e,n,r=(((c=t[10])==null?void 0:c.message)??t[10])+"",l,o,u,i=(!t[1]||!t[0])&&be();return{c(){e=g("p"),n=P("An error occurred: "),l=P(r),o=S(),i&&i.c(),u=te()},m(s,d){p(s,e,d),$(e,n),$(e,l),p(s,o,d),i&&i.m(s,d),p(s,u,d)},p(s,d){var a;d&4&&r!==(r=(((a=s[10])==null?void 0:a.message)??s[10])+"")&&re(l,r),!s[1]||!s[0]?i||(i=be(),i.c(),i.m(u.parentNode,u)):i&&(i.d(1),i=null)},d(s){s&&(h(e),h(o),h(u)),i&&i.d(s)}}}function be(t){let e;return{c(){e=g("p"),e.textContent=`Maybe consider providing an access token, authenticated API calls are more
      likely to succeed.`},m(n,r){p(n,e,r)},d(n){n&&h(e)}}}function ct(t){let e,n,r,l,o,u,i,c={ctx:t,current:null,token:null,hasCatch:!1,pending:dt,then:ft,catch:at};return F(o=t[3],c),{c(){e=g("form"),n=g("textarea"),l=S(),c.block.c(),C(n,"name","ballot"),n.value=r=t[9]},m(s,d){p(s,e,d),$(e,n),$(e,l),c.block.m(e,c.anchor=null),c.mount=()=>e,c.anchor=null,u||(i=ne(e,"submit",t[4]),u=!0)},p(s,d){t=s,d&4&&r!==(r=t[9])&&(n.value=r),c.ctx=t,d&8&&o!==(o=t[3])&&F(o,c)},d(s){s&&h(e),c.block.d(),c.token=null,c=null,u=!1,i()}}}function at(t){return{c:R,m:R,d:R}}function ft(t){let e;return{c(){e=g("button"),e.textContent="Encrypt ballot",C(e,"type","submit")},m(n,r){p(n,e,r)},d(n){n&&h(e)}}}function dt(t){let e;return{c(){e=g("button"),e.textContent="Loading public key…",C(e,"type","submit"),e.disabled=!0},m(n,r){p(n,e,r)},d(n){n&&h(e)}}}function mt(t){let e,n,r=(t[0]||"anonymous")+"",l;return{c(){e=g("p"),n=P("...loading as "),l=P(r)},m(o,u){p(o,e,u),$(e,n),$(e,l)},p(o,u){u&1&&r!==(r=(o[0]||"anonymous")+"")&&re(l,r)},d(o){o&&h(e)}}}function ht(t){let e,n,r,l,o={ctx:t,current:null,token:null,hasCatch:!0,pending:mt,then:ct,catch:st,value:9,error:10};return F(l=t[2],o),{c(){e=g("summary"),e.textContent="Fill in ballot",n=S(),r=te(),o.block.c()},m(u,i){p(u,e,i),p(u,n,i),p(u,r,i),o.block.m(u,o.anchor=i),o.mount=()=>r.parentNode,o.anchor=r},p(u,[i]){t=u,o.ctx=t,i&4&&l!==(l=t[2])&&F(l,o)||fe(o,t,i)},i:R,o:R,d(u){u&&(h(e),h(n),h(r)),o.block.d(u),o.token=null,o=null}}}function pt(t,e,n){var r=this&&this.__awaiter||function(f,y,E,v){function A(w){return w instanceof E?w:new E(function(k){k(w)})}return new(E||(E=Promise))(function(w,k){function _(L){try{b(v.next(L))}catch(T){k(T)}}function m(L){try{b(v.throw(L))}catch(T){k(T)}}function b(L){L.done?w(L.value):A(L.value).then(_,m)}b((v=v.apply(f,y||[])).next())})};let{url:l,username:o,token:u,registerEncryptedBallot:i}=e,c,s;const d=typeof TextEncoder>"u"?{encode(){}}:new TextEncoder;function a(f){f.preventDefault();const y=this.elements.namedItem("ballot");i((()=>r(this,void 0,void 0,function*(){const{encryptedSecret:E,saltedCiphertext:v}=yield ut(d.encode(y.value),yield s);return JSON.stringify({encryptedSecret:ye(new Uint8Array(E)),data:ye(v)})}))())}return c=s=Promise.reject("no data"),ve(()=>{Ge({url:l,username:o,token:u},f=>{n(2,[c,s]=f,c,n(3,s))})}),t.$$set=f=>{"url"in f&&n(5,l=f.url),"username"in f&&n(0,o=f.username),"token"in f&&n(1,u=f.token),"registerEncryptedBallot"in f&&n(6,i=f.registerEncryptedBallot)},[o,u,c,s,a,l,i]}class _t extends Y{constructor(e){super(),W(this,e,pt,ht,q,{url:5,username:0,token:1,registerEncryptedBallot:6})}}function yt(t){let e,n,r,l,o,u,i,c,s,d,a,f,y,E,v,A,w,k,_;return{c(){e=g("summary"),e.textContent="GitHub credentials",n=S(),r=g("p"),r.textContent=`If you are trying to vote on a private repository, or hitting GitHub API rate
  limits, you can supply a token for the API calls.`,l=S(),o=g("form"),u=g("div"),i=g("label"),c=P(`Username:
      `),s=g("input"),d=S(),a=g("label"),f=P(`Token:
      `),y=g("input"),E=S(),v=g("button"),v.textContent="Save",A=S(),w=g("p"),w.innerHTML="The token should have at least the <code>repo</code> permissions.",C(s,"name","username"),s.value=t[0],C(i,"class","svelte-ttd1cx"),C(y,"name","token"),y.value=t[1],C(y,"type","password"),C(y,"placeholder","gho_…"),C(a,"class","svelte-ttd1cx"),C(v,"type","submit"),C(u,"class","svelte-ttd1cx"),C(o,"class","svelte-ttd1cx")},m(m,b){p(m,e,b),p(m,n,b),p(m,r,b),p(m,l,b),p(m,o,b),$(o,u),$(u,i),$(i,c),$(i,s),$(u,d),$(u,a),$(a,f),$(a,y),$(u,E),$(u,v),p(m,A,b),p(m,w,b),k||(_=ne(o,"submit",t[2]),k=!0)},p(m,[b]){b&1&&s.value!==m[0]&&(s.value=m[0]),b&2&&y.value!==m[1]&&(y.value=m[1])},i:R,o:R,d(m){m&&(h(e),h(n),h(r),h(l),h(o),h(A),h(w)),k=!1,_()}}}function bt(t,e,n){let{updateAuth:r,username:l,token:o}=e;function u(i){i.preventDefault(),r(this.username.value,this.token.value)}return t.$$set=i=>{"updateAuth"in i&&n(3,r=i.updateAuth),"username"in i&&n(0,l=i.username),"token"in i&&n(1,o=i.token)},[l,o,u,r]}class gt extends Y{constructor(e){super(),W(this,e,bt,yt,q,{updateAuth:3,username:0,token:1})}}function wt(t){let e,n,r,l,o,u,i,c,s,d,a;return{c(){e=g("summary"),e.textContent="Get URL to load the data",n=S(),r=g("form"),l=g("div"),o=g("label"),u=P(`URL:
      `),i=g("input"),c=S(),s=g("input"),C(i,"type","url"),i.value=t[0],C(i,"name","url"),C(i,"class","svelte-bptx4u"),C(o,"class","svelte-bptx4u"),C(s,"type","submit"),s.value="Load data",C(l,"class","svelte-bptx4u"),C(r,"class","svelte-bptx4u")},m(f,y){p(f,e,y),p(f,n,y),p(f,r,y),$(r,l),$(l,o),$(o,u),$(o,i),$(l,c),$(l,s),d||(a=ne(r,"submit",kt),d=!0)},p(f,[y]){y&1&&i.value!==f[0]&&(i.value=f[0])},i:R,o:R,d(f){f&&(h(e),h(n),h(r)),d=!1,a()}}}function kt(t){t.preventDefault(),globalThis.location.hash=this.elements.namedItem("url").value}function vt(t,e,n){let{url:r}=e;return t.$$set=l=>{"url"in l&&n(0,r=l.url)},[r]}class $t extends Y{constructor(e){super(),W(this,e,vt,wt,q,{url:0})}}function Ct(t){let e,n,r,l,o,u,i,c,s,d,a,f,y,E,v,A,w,k,_;return l=new gt({props:{updateAuth:t[5],username:t[2],token:t[3]}}),s=new $t({props:{url:t[1]}}),y=new _t({props:{url:t[1],username:t[2],token:t[3],registerEncryptedBallot:t[6]}}),w=new Xe({props:{encryptDataPromise:t[0],url:t[1]}}),{c(){e=g("h1"),e.textContent="Caritat",n=S(),r=g("details"),Q(l.$$.fragment),o=S(),u=g("hr"),i=S(),c=g("details"),Q(s.$$.fragment),a=S(),f=g("details"),Q(y.$$.fragment),v=S(),A=g("details"),Q(w.$$.fragment),c.open=d=t[4]===0,f.open=E=t[4]===1,A.open=k=t[4]===2},m(m,b){p(m,e,b),p(m,n,b),p(m,r,b),G(l,r,null),p(m,o,b),p(m,u,b),p(m,i,b),p(m,c,b),G(s,c,null),p(m,a,b),p(m,f,b),G(y,f,null),p(m,v,b),p(m,A,b),G(w,A,null),_=!0},p(m,[b]){const L={};b&4&&(L.username=m[2]),b&8&&(L.token=m[3]),l.$set(L);const T={};b&2&&(T.url=m[1]),s.$set(T),(!_||b&16&&d!==(d=m[4]===0))&&(c.open=d);const J={};b&2&&(J.url=m[1]),b&4&&(J.username=m[2]),b&8&&(J.token=m[3]),y.$set(J),(!_||b&16&&E!==(E=m[4]===1))&&(f.open=E);const oe={};b&1&&(oe.encryptDataPromise=m[0]),b&2&&(oe.url=m[1]),w.$set(oe),(!_||b&16&&k!==(k=m[4]===2))&&(A.open=k)},i(m){_||(K(l.$$.fragment,m),K(s.$$.fragment,m),K(y.$$.fragment,m),K(w.$$.fragment,m),_=!0)},o(m){z(l.$$.fragment,m),z(s.$$.fragment,m),z(y.$$.fragment,m),z(w.$$.fragment,m),_=!1},d(m){m&&(h(e),h(n),h(r),h(o),h(u),h(i),h(c),h(a),h(f),h(v),h(A)),H(l),H(s),H(y),H(w)}}}function Et(t,e,n){var r;let l=new Promise(()=>{}),o=(r=globalThis.location)===null||r===void 0?void 0:r.hash.slice(1),u="",i="";function c(a,f){n(2,u=a),n(3,i=f)}let s=o?1:0;addEventListener("hashchange",()=>{var a;n(1,o=(a=globalThis.location)===null||a===void 0?void 0:a.hash.slice(1)),n(4,s=o?Math.max(s,1):0)});function d(a){n(0,l=a),a.then(()=>{n(4,s=2)},()=>{n(4,s=Math.min(s,1))})}return[l,o,u,i,s,c,d]}class At extends Y{constructor(e){super(),W(this,e,Et,Ct,q,{})}}new At({target:document.getElementById("app")});
