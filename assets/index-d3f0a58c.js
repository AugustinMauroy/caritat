var Ee=Object.defineProperty;var Ae=(t,e,n)=>e in t?Ee(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var oe=(t,e,n)=>(Ae(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(l){if(l.ep)return;l.ep=!0;const o=n(l);fetch(l.href,o)}})();function P(){}function Ce(t){return!!t&&(typeof t=="object"||typeof t=="function")&&typeof t.then=="function"}function be(t){return t()}function fe(){return Object.create(null)}function x(t){t.forEach(be)}function ge(t){return typeof t=="function"}function q(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Se(t){return Object.keys(t).length===0}function $(t,e){t.appendChild(e)}function _(t,e,n){t.insertBefore(e,n||null)}function p(t){t.parentNode&&t.parentNode.removeChild(t)}function y(t){return document.createElement(t)}function C(t){return document.createTextNode(t)}function A(){return C(" ")}function te(){return C("")}function ne(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function S(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Pe(t){return Array.from(t.childNodes)}function re(t,e){e=""+e,t.data!==e&&(t.data=e)}let V;function L(t){V=t}function we(){if(!V)throw new Error("Function called outside component initialization");return V}function ke(t){we().$$.before_update.push(t)}const K=[],de=[];let O=[];const me=[],Re=Promise.resolve();let ue=!1;function Le(){ue||(ue=!0,Re.then(ce))}function se(t){O.push(t)}const le=new Set;let N=0;function ce(){if(N!==0)return;const t=V;do{try{for(;N<K.length;){const e=K[N];N++,L(e),Ue(e.$$)}}catch(e){throw K.length=0,N=0,e}for(L(null),K.length=0,N=0;de.length;)de.pop()();for(let e=0;e<O.length;e+=1){const n=O[e];le.has(n)||(le.add(n),n())}O.length=0}while(K.length);for(;me.length;)me.pop()();ue=!1,le.clear(),L(t)}function Ue(t){if(t.fragment!==null){t.update(),x(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(se)}}function Ie(t){const e=[],n=[];O.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),O=e}const Z=new Set;let T;function Be(){T={r:0,c:[],p:T}}function Te(){T.r||x(T.c),T=T.p}function G(t,e){t&&t.i&&(Z.delete(t),t.i(e))}function j(t,e,n,r){if(t&&t.o){if(Z.has(t))return;Z.add(t),T.c.push(()=>{Z.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function I(t,e){const n=e.token={};function r(l,o,u,i){if(e.token!==n)return;e.resolved=i;let c=e.ctx;u!==void 0&&(c=c.slice(),c[u]=i);const s=l&&(e.current=l)(c);let f=!1;e.block&&(e.blocks?e.blocks.forEach((a,d)=>{d!==o&&a&&(Be(),j(a,1,1,()=>{e.blocks[d]===a&&(e.blocks[d]=null)}),Te())}):e.block.d(1),s.c(),G(s,1),s.m(e.mount(),e.anchor),f=!0),e.block=s,e.blocks&&(e.blocks[o]=s),f&&ce()}if(Ce(t)){const l=we();if(t.then(o=>{L(l),r(e.then,1,e.value,o),L(null)},o=>{if(L(l),r(e.catch,2,e.error,o),L(null),!e.hasCatch)throw o}),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,t),!0;e.resolved=t}}function ae(t,e,n){const r=e.slice(),{resolved:l}=t;t.current===t.then&&(r[t.value]=l),t.current===t.catch&&(r[t.error]=l),t.block.p(r,n)}function W(t){t&&t.c()}function D(t,e,n){const{fragment:r,after_update:l}=t.$$;r&&r.m(e,n),se(()=>{const o=t.$$.on_mount.map(be).filter(ge);t.$$.on_destroy?t.$$.on_destroy.push(...o):x(o),t.$$.on_mount=[]}),l.forEach(se)}function H(t,e){const n=t.$$;n.fragment!==null&&(Ie(n.after_update),x(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Fe(t,e){t.$$.dirty[0]===-1&&(K.push(t),Le(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function J(t,e,n,r,l,o,u=null,i=[-1]){const c=V;L(t);const s=t.$$={fragment:null,ctx:[],props:o,update:P,not_equal:l,bound:fe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:fe(),dirty:i,skip_bound:!1,root:e.target||c.$$.root};u&&u(s.root);let f=!1;if(s.ctx=n?n(t,e.props||{},(a,d,...v)=>{const k=v.length?v[0]:d;return s.ctx&&l(s.ctx[a],s.ctx[a]=k)&&(!s.skip_bound&&s.bound[a]&&s.bound[a](k),f&&Fe(t,a)),d}):[],s.update(),f=!0,x(s.before_update),s.fragment=r?r(s.ctx):!1,e.target){if(e.hydrate){const a=Pe(e.target);s.fragment&&s.fragment.l(a),a.forEach(p)}else s.fragment&&s.fragment.c();e.intro&&G(t.$$.fragment),D(t,e.target,e.anchor),ce()}L(c)}class Y{constructor(){oe(this,"$$");oe(this,"$$set")}$destroy(){H(this,1),this.$destroy=P}$on(e,n){if(!ge(n))return P;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const l=r.indexOf(n);l!==-1&&r.splice(l,1)}}$set(e){this.$$set&&!Se(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Ne="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ne);const Me=/^\/([^/]+)\/([^/]+)\/pull\/(\d+)\/?$/,Ke=/\npreferences:[^\n\S]*(#[^\n]*)?\n/,Q=t=>t.ok?t.json():Promise.reject(new Error(`Fetch error: ${t.status} ${t.statusText}`,{cause:t})),ve=new Map;async function ze(t,e){var h;const n=new URL(t);if(n.origin!=="https://github.com")throw new Error("Only GitHub PR URLs are supported on the web UI. Use the CLI instead.");const r=Me.exec(n.pathname);if(r==null)throw new Error("Only GitHub PR URLs are supported on the web UI. Use the CLI instead.");const[,l,o,u]=r;let i;if((h=e==null?void 0:e.headers)!=null&&h.Authorization){const g=await fetch("https://api.github.com/graphql",{...e,method:"POST",body:JSON.stringify({variables:{prid:Number(u),owner:l,repo:o},query:`query PR($prid: Int!, $owner: String!, $repo: String!) {
        repository(owner: $owner, name: $repo) {
          pullRequest(number: $prid) {
            commits(first: 1) {
              nodes {
                commit {
                  oid
                }
              }
            }
            headRef {
              name
              repository { url }
            }
            closed
            merged
          }
        }
      }
`})}).then(Q);if(g.error)throw new Error("Unable to get required information for the vote PR",{cause:g.error});i=g.data.repository.pullRequest}else{const g=await Promise.all([fetch(`https://api.github.com/repos/${l}/${o}/pulls/${u}`,e).then(Q),fetch(`https://api.github.com/repos/${l}/${o}/pulls/${u}/commits?per_page=1`,e).then(Q)]);i={closed:g[0].state==="closed",merged:g[0].state==="merged",headRef:{name:g[0].head.ref,repository:{url:g[0].head.repo.html_url}},commits:{nodes:[{commit:{oid:g[1][0].sha}}]}}}const{closed:c,merged:s,commits:f,headRef:a}=i;if(c)throw new Error("The PR is marked as closed");if(s)throw new Error("The PR is marked as merged");const{oid:d}=f.nodes[0].commit,{name:v,repository:{url:k}}=a,{files:w}=await fetch(`https://api.github.com/repos/${l}/${o}/commits/${d}`,e).then(Q);if((w==null?void 0:w.length)!==3)throw new Error("That PR does not look like a vote PR");const E=w.find(g=>g.filename==="vote.yml"||g.filename.endsWith("/vote.yml")),b=w.find(g=>g.filename===E.filename.slice(0,-8)+"ballot.yml"),m=w.find(g=>g.filename===E.filename.slice(0,-8)+"public.pem");if(!E||!b||!m)throw new Error("That PR does not look like a vote PR");return ve.set(t,`${k}/new/${v}/${E.filename.replace(/vote\.yml$/,"")}`),{voteFile:E,ballotFile:b,publicKeyFile:m}}function he(t){return ve.get(t)}function Ge(t){let e=t.length,n;for(;e!=0;)n=Math.floor(Math.random()*e),e--,[t[e],t[n]]=[t[n],t[e]];return t}async function Oe(t,e){const n={...e,headers:{...e==null?void 0:e.headers,Accept:"application/vnd.github.raw"}};try{const{voteFile:r,ballotFile:l,publicKeyFile:o}=await ze(t,e),u=/^\+canShuffleCandidates:\s*true$/m.test(r.patch);return[fetch(l.contents_url,n).then(i=>i.ok?i.text():Promise.reject(new Error(`Fetch error: ${i.status} ${i.statusText}`))).then(u?i=>{const c=Ke.exec(i);if(c==null)return console.warn("Cannot find the list of candidates to shuffle, ignoring..."),i;const s=c.index+c[0].length-1,f=[];let a,d,v=s;for(;;){if(d=v+1,v=i.indexOf(`
`,d),v===-1){d!==i.length&&(a+=i.slice(d-1));break}if(i[d]!==" "||i[d+1]!==" ")break;i[d+2]==="-"&&(a&&f.push(a),a=""),a+=i.slice(d-1,v)}return a&&f.push(a),i.slice(0,s)+Ge(f).join("")+`
`+i.slice(d)}:void 0),fetch(o.contents_url,n).then(i=>i.ok?i.arrayBuffer():Promise.reject(new Error(`Fetch error: ${i.status} ${i.statusText}`)))]}catch(r){const l=Promise.reject(r);return[l,l]}}let ie;function je({url:t,username:e,token:n},r){const l=e&&n?{headers:{Authorization:`Basic ${btoa(`${e}:${n}`)}`}}:void 0,o=t+(l==null?void 0:l.headers.Authorization);ie!==o&&(ie=o,Oe(t,l).then(r,u=>(ie=null,r(u))))}function De(t){var l;let e,n=(((l=t[6])==null?void 0:l.message)??t[6])+"",r;return{c(){e=C("An error occurred: "),r=C(n)},m(o,u){_(o,e,u),_(o,r,u)},p(o,u){var i;u&1&&n!==(n=(((i=o[6])==null?void 0:i.message)??o[6])+"")&&re(r,n)},d(o){o&&(p(e),p(r))}}}function He(t){let e,n,r,l,o,u,i,c,s,f,a,d,v,k,w,E,b={ctx:t,current:null,token:null,hasCatch:!0,pending:qe,then:xe,catch:Ve,error:6};return I(o=t[2],b),{c(){e=y("textarea"),r=A(),l=y("div"),b.block.c(),u=A(),i=y("button"),i.textContent="Copy to clipboard",c=A(),s=y("p"),f=C("Cast a vote by pasting this on a "),a=y("a"),d=C("new file on the vote branch"),k=C("."),e.readOnly=!0,e.value=n=t[5],S(i,"type","button"),S(a,"href",v=he(t[1])),S(a,"target","_blank")},m(m,h){_(m,e,h),_(m,r,h),_(m,l,h),b.block.m(l,b.anchor=null),b.mount=()=>l,b.anchor=null,_(m,u,h),_(m,i,h),_(m,c,h),_(m,s,h),$(s,f),$(s,a),$(a,d),$(s,k),w||(E=ne(i,"click",t[4]),w=!0)},p(m,h){t=m,h&1&&n!==(n=t[5])&&(e.value=n),b.ctx=t,h&4&&o!==(o=t[2])&&I(o,b)||ae(b,t,h),h&2&&v!==(v=he(t[1]))&&S(a,"href",v)},d(m){m&&(p(e),p(r),p(l),p(u),p(i),p(c),p(s)),b.block.d(),b.token=null,b=null,w=!1,E()}}}function Ve(t){let e,n=t[3]&&pe(t);return{c(){n&&n.c(),e=te()},m(r,l){n&&n.m(r,l),_(r,e,l)},p(r,l){r[3]?n?n.p(r,l):(n=pe(r),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(r){r&&p(e),n&&n.d(r)}}}function pe(t){var l;let e,n=(((l=t[6])==null?void 0:l.message)??t[6])+"",r;return{c(){e=C("An error occurred: "),r=C(n)},m(o,u){_(o,e,u),_(o,r,u)},p(o,u){var i;u&4&&n!==(n=(((i=o[6])==null?void 0:i.message)??o[6])+"")&&re(r,n)},d(o){o&&(p(e),p(r))}}}function xe(t){let e;return{c(){e=C("Copied to the clipboard!")},m(n,r){_(n,e,r)},p:P,d(n){n&&p(e)}}}function qe(t){let e;return{c(){e=C("Copying to the Clipboard…")},m(n,r){_(n,e,r)},p:P,d(n){n&&p(e)}}}function Je(t){let e;return{c(){e=y("textarea"),e.readOnly=!0,e.value="Encrypting data… "},m(n,r){_(n,e,r)},p:P,d(n){n&&p(e)}}}function Ye(t){let e,n,r,l,o={ctx:t,current:null,token:null,hasCatch:!0,pending:Je,then:He,catch:De,value:5,error:6};return I(l=t[0],o),{c(){e=y("summary"),e.textContent="Get encrypted ballot",n=A(),r=te(),o.block.c()},m(u,i){_(u,e,i),_(u,n,i),_(u,r,i),o.block.m(u,o.anchor=i),o.mount=()=>r.parentNode,o.anchor=r},p(u,[i]){t=u,o.ctx=t,i&1&&l!==(l=t[0])&&I(l,o)||ae(o,t,i)},i:P,o:P,d(u){u&&(p(e),p(n),p(r)),o.block.d(u),o.token=null,o=null}}}function We(t,e,n){let{encryptDataPromise:r}=e,{url:l}=e,o,u;function i(c){n(2,o=r.then(s=>navigator.clipboard.writeText(s))),n(3,u=c!=null)}return ke(i),t.$$set=c=>{"encryptDataPromise"in c&&n(0,r=c.encryptDataPromise),"url"in c&&n(1,l=c.url)},[r,l,o,u,i]}class Qe extends Y{constructor(e){super(),J(this,e,We,Ye,q,{encryptDataPromise:0,url:1})}}const $e={name:"RSA-OAEP",hash:"SHA-256"},z={name:"AES-CBC",length:256,saltSize:8},M={name:"PBKDF2",hash:"SHA-256",iterations:1e5,keySize:32,ivSize:16},Xe=crypto,{subtle:U}=crypto;async function Ze(t,e,...n){const r=await U.importKey("raw",t,M.name,!1,["deriveBits"]),l=await U.deriveBits({...M,salt:e},r,8*(M.ivSize+M.keySize)),o=await U.importKey("raw",new Uint8Array(l,0,M.keySize),z,!1,n),u=new Uint8Array(l,M.keySize);return{key:o,iv:u}}const et=new TextDecoder;function tt(t){const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let r=0,l=t.length;r<l;r++)n[r]=t.charCodeAt(r);return e}const ee="-----BEGIN P";function nt(t){const e=ArrayBuffer.isView(t),n=new DataView(e?t.buffer:t,e?t.byteOffset:0,ee.length);for(let r=0;r<ee.length;r++)if(ee.charCodeAt(r)!==n.getUint8(r))return!1;return!0}function rt(t,e,n){let r;if(typeof e=="string"?e.startsWith(ee):nt(e)){typeof e!="string"&&(e=et.decode(e));const l=e.split("-----",3)[2].replace(/\s+/g,""),o=atob(l);r=tt(o)}else r=e;return U.importKey(t,r,$e,!0,n)}function ot(t,e){return rt(e?"pkcs8":"spki",t,[e?"decrypt":"encrypt"])}const X=[83,97,108,116,101,100,95,95];async function lt(t){const e=await U.exportKey("raw",await U.generateKey(z,!0,["encrypt"])),n=Xe.getRandomValues(new Uint8Array(z.saltSize)),{iv:r,key:l}=await Ze(e,n,"encrypt"),o=await U.encrypt({...z,iv:r},l,t),u=new Uint8Array(X.length+z.saltSize+o.byteLength);return u.set(X),u.set(n,X.length),u.set(new Uint8Array(o),X.length+z.saltSize),{secret:e,saltedCiphertext:u}}async function it(t,e){const n=await ot(e),{saltedCiphertext:r,secret:l}=await lt(t);return{encryptedSecret:await U.encrypt({name:$e.name},n,l),saltedCiphertext:r}}function _e(t){let e="";const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=t.byteLength,l=r%3,o=r-l;let u,i,c,s,f;for(let a=0;a<o;a=a+3)f=t[a]<<16|t[a+1]<<8|t[a+2],u=(f&16515072)>>18,i=(f&258048)>>12,c=(f&4032)>>6,s=f&63,e+=n[u]+n[i]+n[c]+n[s];return l===1?(f=t[o],u=(f&252)>>2,i=(f&3)<<4,e+=n[u]+n[i]+"=="):l===2&&(f=t[o]<<8|t[o+1],u=(f&64512)>>10,i=(f&1008)>>4,c=(f&15)<<2,e+=n[u]+n[i]+n[c]+"="),e}function ut(t){var c;let e,n,r=(((c=t[10])==null?void 0:c.message)??t[10])+"",l,o,u,i=(!t[1]||!t[0])&&ye();return{c(){e=y("p"),n=C("An error occurred: "),l=C(r),o=A(),i&&i.c(),u=te()},m(s,f){_(s,e,f),$(e,n),$(e,l),_(s,o,f),i&&i.m(s,f),_(s,u,f)},p(s,f){var a;f&4&&r!==(r=(((a=s[10])==null?void 0:a.message)??s[10])+"")&&re(l,r),!s[1]||!s[0]?i||(i=ye(),i.c(),i.m(u.parentNode,u)):i&&(i.d(1),i=null)},d(s){s&&(p(e),p(o),p(u)),i&&i.d(s)}}}function ye(t){let e;return{c(){e=y("p"),e.textContent=`Maybe consider providing an access token, authenticated API calls are more
      likely to succeed.`},m(n,r){_(n,e,r)},d(n){n&&p(e)}}}function st(t){let e,n,r,l,o,u,i,c={ctx:t,current:null,token:null,hasCatch:!1,pending:ft,then:at,catch:ct};return I(o=t[3],c),{c(){e=y("form"),n=y("textarea"),l=A(),c.block.c(),S(n,"name","ballot"),n.value=r=t[9]},m(s,f){_(s,e,f),$(e,n),$(e,l),c.block.m(e,c.anchor=null),c.mount=()=>e,c.anchor=null,u||(i=ne(e,"submit",t[4]),u=!0)},p(s,f){t=s,f&4&&r!==(r=t[9])&&(n.value=r),c.ctx=t,f&8&&o!==(o=t[3])&&I(o,c)},d(s){s&&p(e),c.block.d(),c.token=null,c=null,u=!1,i()}}}function ct(t){return{c:P,m:P,d:P}}function at(t){let e;return{c(){e=y("button"),e.textContent="Encrypt ballot",S(e,"type","submit")},m(n,r){_(n,e,r)},d(n){n&&p(e)}}}function ft(t){let e;return{c(){e=y("button"),e.textContent="Loading public key…",S(e,"type","submit"),e.disabled=!0},m(n,r){_(n,e,r)},d(n){n&&p(e)}}}function dt(t){let e,n,r=(t[0]||"anonymous")+"",l;return{c(){e=y("p"),n=C("...loading as "),l=C(r)},m(o,u){_(o,e,u),$(e,n),$(e,l)},p(o,u){u&1&&r!==(r=(o[0]||"anonymous")+"")&&re(l,r)},d(o){o&&p(e)}}}function mt(t){let e,n,r,l,o={ctx:t,current:null,token:null,hasCatch:!0,pending:dt,then:st,catch:ut,value:9,error:10};return I(l=t[2],o),{c(){e=y("summary"),e.textContent="Fill in ballot",n=A(),r=te(),o.block.c()},m(u,i){_(u,e,i),_(u,n,i),_(u,r,i),o.block.m(u,o.anchor=i),o.mount=()=>r.parentNode,o.anchor=r},p(u,[i]){t=u,o.ctx=t,i&4&&l!==(l=t[2])&&I(l,o)||ae(o,t,i)},i:P,o:P,d(u){u&&(p(e),p(n),p(r)),o.block.d(u),o.token=null,o=null}}}function ht(t,e,n){var r=this&&this.__awaiter||function(d,v,k,w){function E(b){return b instanceof k?b:new k(function(m){m(b)})}return new(k||(k=Promise))(function(b,m){function h(R){try{F(w.next(R))}catch(B){m(B)}}function g(R){try{F(w.throw(R))}catch(B){m(B)}}function F(R){R.done?b(R.value):E(R.value).then(h,g)}F((w=w.apply(d,v||[])).next())})};let{url:l,username:o,token:u,registerEncryptedBallot:i}=e,c,s;const f=typeof TextEncoder>"u"?{encode(){}}:new TextEncoder;function a(d){d.preventDefault();const v=this.elements.namedItem("ballot");i((()=>r(this,void 0,void 0,function*(){const{encryptedSecret:k,saltedCiphertext:w}=yield it(f.encode(v.value),yield s);return JSON.stringify({encryptedSecret:_e(new Uint8Array(k)),data:_e(w)})}))())}return c=s=Promise.reject("no data"),ke(()=>{je({url:l,username:o,token:u},d=>{n(2,[c,s]=d,c,n(3,s))})}),t.$$set=d=>{"url"in d&&n(5,l=d.url),"username"in d&&n(0,o=d.username),"token"in d&&n(1,u=d.token),"registerEncryptedBallot"in d&&n(6,i=d.registerEncryptedBallot)},[o,u,c,s,a,l,i]}class pt extends Y{constructor(e){super(),J(this,e,ht,mt,q,{url:5,username:0,token:1,registerEncryptedBallot:6})}}function _t(t){let e,n,r,l,o,u,i,c,s,f,a,d,v,k,w,E,b,m;return{c(){e=y("summary"),e.textContent="GitHub credentials",n=A(),r=y("p"),r.textContent=`If you are trying to vote on a private repository, or hitting GitHub API rate
  limits, you can supply a token for the API calls.`,l=A(),o=y("form"),u=y("label"),i=C(`Username:
      `),c=y("input"),s=A(),f=y("label"),a=C(`Token:
      `),d=y("input"),v=A(),k=y("input"),w=A(),E=y("p"),E.innerHTML="The token should have at least the <code>repo</code> permissions.",S(c,"name","username"),c.value=t[0],S(c,"type","text"),S(c,"placeholder","octocat"),S(d,"name","token"),d.value=t[1],S(d,"type","password"),S(d,"placeholder","gho_…"),S(k,"type","submit"),k.value="Save"},m(h,g){_(h,e,g),_(h,n,g),_(h,r,g),_(h,l,g),_(h,o,g),$(o,u),$(u,i),$(u,c),$(o,s),$(o,f),$(f,a),$(f,d),$(o,v),$(o,k),_(h,w,g),_(h,E,g),b||(m=ne(o,"submit",t[2]),b=!0)},p(h,[g]){g&1&&c.value!==h[0]&&(c.value=h[0]),g&2&&d.value!==h[1]&&(d.value=h[1])},i:P,o:P,d(h){h&&(p(e),p(n),p(r),p(l),p(o),p(w),p(E)),b=!1,m()}}}function yt(t,e,n){let{updateAuth:r,username:l,token:o}=e;function u(i){i.preventDefault(),r(this.username.value,this.token.value)}return t.$$set=i=>{"updateAuth"in i&&n(3,r=i.updateAuth),"username"in i&&n(0,l=i.username),"token"in i&&n(1,o=i.token)},[l,o,u,r]}class bt extends Y{constructor(e){super(),J(this,e,yt,_t,q,{updateAuth:3,username:0,token:1})}}function gt(t){let e,n,r,l,o,u,i,c,s,f;return{c(){e=y("summary"),e.textContent="Get URL to load the data",n=A(),r=y("form"),l=y("label"),o=C(`URL:
      `),u=y("input"),i=A(),c=y("input"),S(u,"type","url"),u.value=t[0],S(u,"name","url"),S(c,"type","submit"),c.value="Load data"},m(a,d){_(a,e,d),_(a,n,d),_(a,r,d),$(r,l),$(l,o),$(l,u),$(r,i),$(r,c),s||(f=ne(r,"submit",wt),s=!0)},p(a,[d]){d&1&&u.value!==a[0]&&(u.value=a[0])},i:P,o:P,d(a){a&&(p(e),p(n),p(r)),s=!1,f()}}}function wt(t){t.preventDefault(),globalThis.location.hash=this.elements.namedItem("url").value}function kt(t,e,n){let{url:r}=e;return t.$$set=l=>{"url"in l&&n(0,r=l.url)},[r]}class vt extends Y{constructor(e){super(),J(this,e,kt,gt,q,{url:0})}}function $t(t){let e,n,r,l,o,u,i,c,s,f,a,d,v,k,w,E,b;return l=new bt({props:{updateAuth:t[5],username:t[2],token:t[3]}}),i=new vt({props:{url:t[1]}}),a=new pt({props:{url:t[1],username:t[2],token:t[3],registerEncryptedBallot:t[6]}}),w=new Qe({props:{encryptDataPromise:t[0],url:t[1]}}),{c(){e=y("header"),e.innerHTML="<h1>Caritat</h1> <p>A voting software for remote teams</p>",n=A(),r=y("details"),W(l.$$.fragment),o=A(),u=y("details"),W(i.$$.fragment),s=A(),f=y("details"),W(a.$$.fragment),v=A(),k=y("details"),W(w.$$.fragment),u.open=c=t[4]===0,f.open=d=t[4]===1,k.open=E=t[4]===2},m(m,h){_(m,e,h),_(m,n,h),_(m,r,h),D(l,r,null),_(m,o,h),_(m,u,h),D(i,u,null),_(m,s,h),_(m,f,h),D(a,f,null),_(m,v,h),_(m,k,h),D(w,k,null),b=!0},p(m,[h]){const g={};h&4&&(g.username=m[2]),h&8&&(g.token=m[3]),l.$set(g);const F={};h&2&&(F.url=m[1]),i.$set(F),(!b||h&16&&c!==(c=m[4]===0))&&(u.open=c);const R={};h&2&&(R.url=m[1]),h&4&&(R.username=m[2]),h&8&&(R.token=m[3]),a.$set(R),(!b||h&16&&d!==(d=m[4]===1))&&(f.open=d);const B={};h&1&&(B.encryptDataPromise=m[0]),h&2&&(B.url=m[1]),w.$set(B),(!b||h&16&&E!==(E=m[4]===2))&&(k.open=E)},i(m){b||(G(l.$$.fragment,m),G(i.$$.fragment,m),G(a.$$.fragment,m),G(w.$$.fragment,m),b=!0)},o(m){j(l.$$.fragment,m),j(i.$$.fragment,m),j(a.$$.fragment,m),j(w.$$.fragment,m),b=!1},d(m){m&&(p(e),p(n),p(r),p(o),p(u),p(s),p(f),p(v),p(k)),H(l),H(i),H(a),H(w)}}}function Et(t,e,n){var r;let l=new Promise(()=>{}),o=(r=globalThis.location)===null||r===void 0?void 0:r.hash.slice(1),u="",i="";function c(a,d){n(2,u=a),n(3,i=d)}let s=o?1:0;addEventListener("hashchange",()=>{var a;n(1,o=(a=globalThis.location)===null||a===void 0?void 0:a.hash.slice(1)),n(4,s=o?Math.max(s,1):0)});function f(a){n(0,l=a),a.then(()=>{n(4,s=2)},()=>{n(4,s=Math.min(s,1))})}return[l,o,u,i,s,c,f]}class At extends Y{constructor(e){super(),J(this,e,Et,$t,q,{})}}new At({target:document.getElementById("app")});
