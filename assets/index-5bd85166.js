(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(l){if(l.ep)return;l.ep=!0;const o=n(l);fetch(l.href,o)}})();function R(){}function Ce(t){return!!t&&(typeof t=="object"||typeof t=="function")&&typeof t.then=="function"}function be(t){return t()}function fe(){return Object.create(null)}function D(t){t.forEach(be)}function ke(t){return typeof t=="function"}function q(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function $e(t){return Object.keys(t).length===0}function E(t,e){t.appendChild(e)}function h(t,e,n){t.insertBefore(e,n||null)}function p(t){t.parentNode&&t.parentNode.removeChild(t)}function k(t){return document.createElement(t)}function S(t){return document.createTextNode(t)}function P(){return S(" ")}function te(){return S("")}function ne(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function C(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Ae(t){return Array.from(t.childNodes)}function re(t,e){e=""+e,t.data!==e&&(t.data=e)}let V;function U(t){V=t}function we(){if(!V)throw new Error("Function called outside component initialization");return V}function ve(t){we().$$.before_update.push(t)}const O=[],de=[];let j=[];const me=[],Pe=Promise.resolve();let ue=!1;function Se(){ue||(ue=!0,Pe.then(ce))}function se(t){j.push(t)}const le=new Set;let x=0;function ce(){if(x!==0)return;const t=V;do{try{for(;x<O.length;){const e=O[x];x++,U(e),Re(e.$$)}}catch(e){throw O.length=0,x=0,e}for(U(null),O.length=0,x=0;de.length;)de.pop()();for(let e=0;e<j.length;e+=1){const n=j[e];le.has(n)||(le.add(n),n())}j.length=0}while(O.length);for(;me.length;)me.pop()();ue=!1,le.clear(),U(t)}function Re(t){if(t.fragment!==null){t.update(),D(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(se)}}function Le(t){const e=[],n=[];j.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),j=e}const Z=new Set;let T;function Ue(){T={r:0,c:[],p:T}}function Fe(){T.r||D(T.c),T=T.p}function K(t,e){t&&t.i&&(Z.delete(t),t.i(e))}function z(t,e,n,r){if(t&&t.o){if(Z.has(t))return;Z.add(t),T.c.push(()=>{Z.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function I(t,e){const n=e.token={};function r(l,o,u,i){if(e.token!==n)return;e.resolved=i;let a=e.ctx;u!==void 0&&(a=a.slice(),a[u]=i);const s=l&&(e.current=l)(a);let m=!1;e.block&&(e.blocks?e.blocks.forEach((f,d)=>{d!==o&&f&&(Ue(),z(f,1,1,()=>{e.blocks[d]===f&&(e.blocks[d]=null)}),Fe())}):e.block.d(1),s.c(),K(s,1),s.m(e.mount(),e.anchor),m=!0),e.block=s,e.blocks&&(e.blocks[o]=s),m&&ce()}if(Ce(t)){const l=we();if(t.then(o=>{U(l),r(e.then,1,e.value,o),U(null)},o=>{if(U(l),r(e.catch,2,e.error,o),U(null),!e.hasCatch)throw o}),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,t),!0;e.resolved=t}}function ae(t,e,n){const r=e.slice(),{resolved:l}=t;t.current===t.then&&(r[t.value]=l),t.current===t.catch&&(r[t.error]=l),t.block.p(r,n)}function Q(t){t&&t.c()}function G(t,e,n,r){const{fragment:l,after_update:o}=t.$$;l&&l.m(e,n),r||se(()=>{const u=t.$$.on_mount.map(be).filter(ke);t.$$.on_destroy?t.$$.on_destroy.push(...u):D(u),t.$$.on_mount=[]}),o.forEach(se)}function H(t,e){const n=t.$$;n.fragment!==null&&(Le(n.after_update),D(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Ie(t,e){t.$$.dirty[0]===-1&&(O.push(t),Se(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function W(t,e,n,r,l,o,u,i=[-1]){const a=V;U(t);const s=t.$$={fragment:null,ctx:[],props:o,update:R,not_equal:l,bound:fe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:fe(),dirty:i,skip_bound:!1,root:e.target||a.$$.root};u&&u(s.root);let m=!1;if(s.ctx=n?n(t,e.props||{},(f,d,...y)=>{const $=y.length?y[0]:d;return s.ctx&&l(s.ctx[f],s.ctx[f]=$)&&(!s.skip_bound&&s.bound[f]&&s.bound[f]($),m&&Ie(t,f)),d}):[],s.update(),m=!0,D(s.before_update),s.fragment=r?r(s.ctx):!1,e.target){if(e.hydrate){const f=Ae(e.target);s.fragment&&s.fragment.l(f),f.forEach(p)}else s.fragment&&s.fragment.c();e.intro&&K(t.$$.fragment),G(t,e.target,e.anchor,e.customElement),ce()}U(a)}class Y{$destroy(){H(this,1),this.$destroy=R}$on(e,n){if(!ke(n))return R;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const l=r.indexOf(n);l!==-1&&r.splice(l,1)}}$set(e){this.$$set&&!$e(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Te=/^\/([^/]+)\/([^/]+)\/pull\/(\d+)\/?$/,Be=/\npreferences:[^\n\S]*(#[^\n]*)?\n/,ge=new Map;async function xe(t,e){const n=new URL(t);if(n.origin!=="https://github.com")throw new Error("Only GitHub PR URLs are supported on the web UI. Use the CLI instead.");const r=Te.exec(n.pathname);if(r==null)throw new Error("Only GitHub PR URLs are supported on the web UI. Use the CLI instead.");const[,l,o,u]=r,i=await fetch("https://api.github.com/graphql",{...e,method:"POST",body:JSON.stringify({variables:{prid:Number(u),owner:l,repo:o},query:`query PR($prid: Int!, $owner: String!, $repo: String!) {
        repository(owner: $owner, name: $repo) {
          pullRequest(number: $prid) {
            commits(first: 1) {
              nodes {
                commit {
                  oid
                }
              }
            }
            headRef {
              name
              repository { url }
            }
            closed
            merged
          }
        }
      }
`})}).then(_=>_.ok?_.json():Promise.reject(new Error(`Fetch error: ${_.status} ${_.statusText}`,{cause:_})));if(i.error)throw new Error("Unable to get required information for the vote PR",{cause:i.error});const{closed:a,merged:s,commits:m,headRef:f}=i.data.repository.pullRequest;if(a)throw new Error("The PR is marked as closed");if(s)throw new Error("The PR is marked as merged");const{oid:d}=m.nodes[0].commit,{name:y,repository:{url:$}}=f,{files:g}=await fetch(`https://api.github.com/repos/${l}/${o}/commits/${d}`,e).then(_=>_.ok?_.json():Promise.reject(new Error(`Fetch error: ${_.status} ${_.statusText}`,{cause:_})));if((g==null?void 0:g.length)!==3)throw new Error("That PR does not look like a vote PR");const A=g.find(_=>_.filename.endsWith("/vote.yml")),w=g.find(_=>_.filename.endsWith("/ballot.yml")),v=g.find(_=>_.filename.endsWith("/public.pem"));if(!A||!w||!v)throw new Error("That PR does not look like a vote PR");return ge.set(t,`${$}/new/${y}/${A.filename.replace(/vote\.yml$/,"")}`),{voteFile:A,ballotFile:w,publicKeyFile:v}}function pe(t){return ge.get(t)}function Ne(t){let e=t.length,n;for(;e!=0;)n=Math.floor(Math.random()*e),e--,[t[e],t[n]]=[t[n],t[e]];return t}async function Oe(t,e){const n={...e,headers:{...e==null?void 0:e.headers,Accept:"application/vnd.github.raw"}};try{const{voteFile:r,ballotFile:l,publicKeyFile:o}=await xe(t,e),u=/^\+canShuffleCandidates:\s*true$/m.test(r.patch);return[fetch(l.contents_url,n).then(i=>i.ok?i.text():Promise.reject(new Error(`Fetch error: ${i.status} ${i.statusText}`))).then(u?i=>{const a=Be.exec(i);if(a==null)return console.warn("Cannot find the list of candidates to shuffle, ignoring..."),i;const s=a.index+a[0].length-1,m=[];let f,d,y=s;for(;;){if(d=y+1,y=i.indexOf(`
`,d),y===-1){d!==i.length&&(f+=i.slice(d-1));break}if(i[d]!==" "||i[d+1]!==" ")break;i[d+2]==="-"&&(f&&m.push(f),f=""),f+=i.slice(d-1,y)}return f&&m.push(f),i.slice(0,s)+Ne(m).join("")+`
`+i.slice(d)}:void 0),fetch(o.contents_url,n).then(i=>i.ok?i.arrayBuffer():Promise.reject(new Error(`Fetch error: ${i.status} ${i.statusText}`)))]}catch(r){const l=Promise.reject(r);return[l,l]}}let ie;function Me({url:t,username:e,token:n},r){const l=e&&n?{headers:{Authorization:`Basic ${btoa(`${e}:${n}`)}`}}:void 0,o=t+(l==null?void 0:l.headers.Authorization);ie!==o&&(ie=o,Oe(t,l).then(r,u=>(ie=null,r(u))))}function Ke(t){var l;let e,n=(((l=t[6])==null?void 0:l.message)??t[6])+"",r;return{c(){e=S("An error occurred: "),r=S(n)},m(o,u){h(o,e,u),h(o,r,u)},p(o,u){var i;u&1&&n!==(n=(((i=o[6])==null?void 0:i.message)??o[6])+"")&&re(r,n)},d(o){o&&p(e),o&&p(r)}}}function je(t){let e,n,r,l,o,u,i,a,s,m,f,d,y,$,g,A,w={ctx:t,current:null,token:null,hasCatch:!0,pending:He,then:Ge,catch:ze,error:6};return I(o=t[2],w),{c(){e=k("textarea"),r=P(),l=k("div"),w.block.c(),u=P(),i=k("button"),i.textContent="Copy to clipboard",a=P(),s=k("p"),m=S("Cast a vote by pasting this on a "),f=k("a"),d=S("new file on the vote branch"),$=S("."),e.readOnly=!0,e.value=n=t[5],C(i,"type","button"),C(f,"href",y=pe(t[1])),C(f,"target","_blank")},m(v,_){h(v,e,_),h(v,r,_),h(v,l,_),w.block.m(l,w.anchor=null),w.mount=()=>l,w.anchor=null,h(v,u,_),h(v,i,_),h(v,a,_),h(v,s,_),E(s,m),E(s,f),E(f,d),E(s,$),g||(A=ne(i,"click",t[4]),g=!0)},p(v,_){t=v,_&1&&n!==(n=t[5])&&(e.value=n),w.ctx=t,_&4&&o!==(o=t[2])&&I(o,w)||ae(w,t,_),_&2&&y!==(y=pe(t[1]))&&C(f,"href",y)},d(v){v&&p(e),v&&p(r),v&&p(l),w.block.d(),w.token=null,w=null,v&&p(u),v&&p(i),v&&p(a),v&&p(s),g=!1,A()}}}function ze(t){let e,n=t[3]&&he(t);return{c(){n&&n.c(),e=te()},m(r,l){n&&n.m(r,l),h(r,e,l)},p(r,l){r[3]?n?n.p(r,l):(n=he(r),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(r){n&&n.d(r),r&&p(e)}}}function he(t){var l;let e,n=(((l=t[6])==null?void 0:l.message)??t[6])+"",r;return{c(){e=S("An error occurred: "),r=S(n)},m(o,u){h(o,e,u),h(o,r,u)},p(o,u){var i;u&4&&n!==(n=(((i=o[6])==null?void 0:i.message)??o[6])+"")&&re(r,n)},d(o){o&&p(e),o&&p(r)}}}function Ge(t){let e;return{c(){e=S("Copied to the clipboard!")},m(n,r){h(n,e,r)},p:R,d(n){n&&p(e)}}}function He(t){let e;return{c(){e=S("Copying to the Clipboard…")},m(n,r){h(n,e,r)},p:R,d(n){n&&p(e)}}}function Ve(t){let e;return{c(){e=k("textarea"),e.readOnly=!0,e.value="Encrypting data… "},m(n,r){h(n,e,r)},p:R,d(n){n&&p(e)}}}function De(t){let e,n,r,l,o={ctx:t,current:null,token:null,hasCatch:!0,pending:Ve,then:je,catch:Ke,value:5,error:6};return I(l=t[0],o),{c(){e=k("summary"),e.textContent="Get encrypted ballot",n=P(),r=te(),o.block.c()},m(u,i){h(u,e,i),h(u,n,i),h(u,r,i),o.block.m(u,o.anchor=i),o.mount=()=>r.parentNode,o.anchor=r},p(u,[i]){t=u,o.ctx=t,i&1&&l!==(l=t[0])&&I(l,o)||ae(o,t,i)},i:R,o:R,d(u){u&&p(e),u&&p(n),u&&p(r),o.block.d(u),o.token=null,o=null}}}function qe(t,e,n){let{encryptDataPromise:r}=e,{url:l}=e,o,u;function i(a){n(2,o=r.then(s=>navigator.clipboard.writeText(s))),n(3,u=a!=null)}return ve(i),t.$$set=a=>{"encryptDataPromise"in a&&n(0,r=a.encryptDataPromise),"url"in a&&n(1,l=a.url)},[r,l,o,u,i]}class We extends Y{constructor(e){super(),W(this,e,qe,De,q,{encryptDataPromise:0,url:1})}}const Ee={name:"RSA-OAEP",hash:"SHA-256"},M={name:"AES-CBC",length:256,saltSize:8},N={name:"PBKDF2",hash:"SHA-256",iterations:1e5,keySize:32,ivSize:16},Ye=crypto,{subtle:F}=crypto;async function Je(t,e,...n){const r=await F.importKey("raw",t,N.name,!1,["deriveBits"]),l=await F.deriveBits({...N,salt:e},r,8*(N.ivSize+N.keySize)),o=await F.importKey("raw",new Uint8Array(l,0,N.keySize),M,!1,n),u=new Uint8Array(l,N.keySize);return{key:o,iv:u}}const Qe=new TextDecoder;function Xe(t){const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let r=0,l=t.length;r<l;r++)n[r]=t.charCodeAt(r);return e}const ee="-----BEGIN P";function Ze(t){const e=ArrayBuffer.isView(t),n=new DataView(e?t.buffer:t,e?t.byteOffset:0,ee.length);for(let r=0;r<ee.length;r++)if(ee.charCodeAt(r)!==n.getUint8(r))return!1;return!0}function et(t,e,n){let r;if(typeof e=="string"?e.startsWith(ee):Ze(e)){typeof e!="string"&&(e=Qe.decode(e));const l=e.split("-----",3)[2].replace(/\s+/g,""),o=atob(l);r=Xe(o)}else r=e;return F.importKey(t,r,Ee,!0,n)}function tt(t,e){return et(e?"pkcs8":"spki",t,[e?"decrypt":"encrypt"])}const X=[83,97,108,116,101,100,95,95];async function nt(t){const e=await F.exportKey("raw",await F.generateKey(M,!0,["encrypt"])),n=Ye.getRandomValues(new Uint8Array(M.saltSize)),{iv:r,key:l}=await Je(e,n,"encrypt"),o=await F.encrypt({...M,iv:r},l,t),u=new Uint8Array(X.length+M.saltSize+o.byteLength);return u.set(X),u.set(n,X.length),u.set(new Uint8Array(o),X.length+M.saltSize),{secret:e,saltedCiphertext:u}}async function rt(t,e){const n=await tt(e),{saltedCiphertext:r,secret:l}=await nt(t);return{encryptedSecret:await F.encrypt({name:Ee.name},n,l),saltedCiphertext:r}}function _e(t){let e="";const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=t.byteLength,l=r%3,o=r-l;let u,i,a,s,m;for(let f=0;f<o;f=f+3)m=t[f]<<16|t[f+1]<<8|t[f+2],u=(m&16515072)>>18,i=(m&258048)>>12,a=(m&4032)>>6,s=m&63,e+=n[u]+n[i]+n[a]+n[s];return l==1?(m=t[o],u=(m&252)>>2,i=(m&3)<<4,e+=n[u]+n[i]+"=="):l==2&&(m=t[o]<<8|t[o+1],u=(m&64512)>>10,i=(m&1008)>>4,a=(m&15)<<2,e+=n[u]+n[i]+n[a]+"="),e}function ot(t){var a;let e,n,r=(((a=t[10])==null?void 0:a.message)??t[10])+"",l,o,u,i=(!t[1]||!t[0])&&ye();return{c(){e=k("p"),n=S("An error occurred: "),l=S(r),o=P(),i&&i.c(),u=te()},m(s,m){h(s,e,m),E(e,n),E(e,l),h(s,o,m),i&&i.m(s,m),h(s,u,m)},p(s,m){var f;m&4&&r!==(r=(((f=s[10])==null?void 0:f.message)??s[10])+"")&&re(l,r),!s[1]||!s[0]?i||(i=ye(),i.c(),i.m(u.parentNode,u)):i&&(i.d(1),i=null)},d(s){s&&p(e),s&&p(o),i&&i.d(s),s&&p(u)}}}function ye(t){let e;return{c(){e=k("p"),e.textContent=`Maybe consider providing an access token, authenticated API calls are more
      likely to succeed.`},m(n,r){h(n,e,r)},d(n){n&&p(e)}}}function lt(t){let e,n,r,l,o,u,i,a={ctx:t,current:null,token:null,hasCatch:!1,pending:st,then:ut,catch:it};return I(o=t[3],a),{c(){e=k("form"),n=k("textarea"),l=P(),a.block.c(),C(n,"name","ballot"),n.value=r=t[9]},m(s,m){h(s,e,m),E(e,n),E(e,l),a.block.m(e,a.anchor=null),a.mount=()=>e,a.anchor=null,u||(i=ne(e,"submit",t[4]),u=!0)},p(s,m){t=s,m&4&&r!==(r=t[9])&&(n.value=r),a.ctx=t,m&8&&o!==(o=t[3])&&I(o,a)},d(s){s&&p(e),a.block.d(),a.token=null,a=null,u=!1,i()}}}function it(t){return{c:R,m:R,d:R}}function ut(t){let e;return{c(){e=k("button"),e.textContent="Encrypt ballot",C(e,"type","submit")},m(n,r){h(n,e,r)},d(n){n&&p(e)}}}function st(t){let e;return{c(){e=k("button"),e.textContent="Loading public key…",C(e,"type","submit"),e.disabled=!0},m(n,r){h(n,e,r)},d(n){n&&p(e)}}}function ct(t){let e,n,r=(t[0]||"anonymous")+"",l;return{c(){e=k("p"),n=S("...loading as "),l=S(r)},m(o,u){h(o,e,u),E(e,n),E(e,l)},p(o,u){u&1&&r!==(r=(o[0]||"anonymous")+"")&&re(l,r)},d(o){o&&p(e)}}}function at(t){let e,n,r,l,o={ctx:t,current:null,token:null,hasCatch:!0,pending:ct,then:lt,catch:ot,value:9,error:10};return I(l=t[2],o),{c(){e=k("summary"),e.textContent="Fill in ballot",n=P(),r=te(),o.block.c()},m(u,i){h(u,e,i),h(u,n,i),h(u,r,i),o.block.m(u,o.anchor=i),o.mount=()=>r.parentNode,o.anchor=r},p(u,[i]){t=u,o.ctx=t,i&4&&l!==(l=t[2])&&I(l,o)||ae(o,t,i)},i:R,o:R,d(u){u&&p(e),u&&p(n),u&&p(r),o.block.d(u),o.token=null,o=null}}}function ft(t,e,n){var r=this&&this.__awaiter||function(d,y,$,g){function A(w){return w instanceof $?w:new $(function(v){v(w)})}return new($||($=Promise))(function(w,v){function _(L){try{b(g.next(L))}catch(B){v(B)}}function c(L){try{b(g.throw(L))}catch(B){v(B)}}function b(L){L.done?w(L.value):A(L.value).then(_,c)}b((g=g.apply(d,y||[])).next())})};let{url:l,username:o,token:u,registerEncryptedBallot:i}=e,a,s;const m=typeof TextEncoder>"u"?{encode(){}}:new TextEncoder;function f(d){d.preventDefault();const y=this.elements.namedItem("ballot");i((()=>r(this,void 0,void 0,function*(){const{encryptedSecret:$,saltedCiphertext:g}=yield rt(m.encode(y.value),yield s);return JSON.stringify({encryptedSecret:_e(new Uint8Array($)),data:_e(g)})}))())}return a=s=Promise.reject("no data"),ve(()=>{Me({url:l,username:o,token:u},d=>{n(2,[a,s]=d,a,n(3,s))})}),t.$$set=d=>{"url"in d&&n(5,l=d.url),"username"in d&&n(0,o=d.username),"token"in d&&n(1,u=d.token),"registerEncryptedBallot"in d&&n(6,i=d.registerEncryptedBallot)},[o,u,a,s,f,l,i]}class dt extends Y{constructor(e){super(),W(this,e,ft,at,q,{url:5,username:0,token:1,registerEncryptedBallot:6})}}function mt(t){let e,n,r,l,o,u,i,a,s,m,f,d,y,$,g,A,w,v,_;return{c(){e=k("summary"),e.textContent="GitHub credentials",n=P(),r=k("p"),r.textContent=`If you are trying to vote on a private repository, or hitting GitHub API rate
  limits, you can supply a token for the API calls.`,l=P(),o=k("form"),u=k("div"),i=k("label"),a=S(`Username:
      `),s=k("input"),m=P(),f=k("label"),d=S(`Token:
      `),y=k("input"),$=P(),g=k("button"),g.textContent="Save",A=P(),w=k("p"),w.innerHTML="The token should have at least the <code>repo</code> permissions.",C(s,"name","username"),s.value=t[0],C(i,"class","svelte-ttd1cx"),C(y,"name","token"),y.value=t[1],C(y,"type","password"),C(y,"placeholder","gho_…"),C(f,"class","svelte-ttd1cx"),C(g,"type","submit"),C(u,"class","svelte-ttd1cx"),C(o,"class","svelte-ttd1cx")},m(c,b){h(c,e,b),h(c,n,b),h(c,r,b),h(c,l,b),h(c,o,b),E(o,u),E(u,i),E(i,a),E(i,s),E(u,m),E(u,f),E(f,d),E(f,y),E(u,$),E(u,g),h(c,A,b),h(c,w,b),v||(_=ne(o,"submit",t[2]),v=!0)},p(c,[b]){b&1&&s.value!==c[0]&&(s.value=c[0]),b&2&&y.value!==c[1]&&(y.value=c[1])},i:R,o:R,d(c){c&&p(e),c&&p(n),c&&p(r),c&&p(l),c&&p(o),c&&p(A),c&&p(w),v=!1,_()}}}function pt(t,e,n){let{updateAuth:r,username:l,token:o}=e;function u(i){i.preventDefault(),r(this.username.value,this.token.value)}return t.$$set=i=>{"updateAuth"in i&&n(3,r=i.updateAuth),"username"in i&&n(0,l=i.username),"token"in i&&n(1,o=i.token)},[l,o,u,r]}class ht extends Y{constructor(e){super(),W(this,e,pt,mt,q,{updateAuth:3,username:0,token:1})}}function _t(t){let e,n,r,l,o,u,i,a,s,m,f;return{c(){e=k("summary"),e.textContent="Get URL to load the data",n=P(),r=k("form"),l=k("div"),o=k("label"),u=S(`URL:
      `),i=k("input"),a=P(),s=k("input"),C(i,"type","url"),i.value=t[0],C(i,"name","url"),C(i,"class","svelte-bptx4u"),C(o,"class","svelte-bptx4u"),C(s,"type","submit"),s.value="Load data",C(l,"class","svelte-bptx4u"),C(r,"class","svelte-bptx4u")},m(d,y){h(d,e,y),h(d,n,y),h(d,r,y),E(r,l),E(l,o),E(o,u),E(o,i),E(l,a),E(l,s),m||(f=ne(r,"submit",yt),m=!0)},p(d,[y]){y&1&&i.value!==d[0]&&(i.value=d[0])},i:R,o:R,d(d){d&&p(e),d&&p(n),d&&p(r),m=!1,f()}}}function yt(t){t.preventDefault(),globalThis.location.hash=this.elements.namedItem("url").value}function bt(t,e,n){let{url:r}=e;return t.$$set=l=>{"url"in l&&n(0,r=l.url)},[r]}class kt extends Y{constructor(e){super(),W(this,e,bt,_t,q,{url:0})}}function wt(t){let e,n,r,l,o,u,i,a,s,m,f,d,y,$,g,A,w,v,_;return l=new ht({props:{updateAuth:t[5],username:t[2],token:t[3]}}),s=new kt({props:{url:t[1]}}),y=new dt({props:{url:t[1],username:t[2],token:t[3],registerEncryptedBallot:t[6]}}),w=new We({props:{encryptDataPromise:t[0],url:t[1]}}),{c(){e=k("h1"),e.textContent="Caritat",n=P(),r=k("details"),Q(l.$$.fragment),o=P(),u=k("hr"),i=P(),a=k("details"),Q(s.$$.fragment),f=P(),d=k("details"),Q(y.$$.fragment),g=P(),A=k("details"),Q(w.$$.fragment),a.open=m=t[4]===0,d.open=$=t[4]===1,A.open=v=t[4]===2},m(c,b){h(c,e,b),h(c,n,b),h(c,r,b),G(l,r,null),h(c,o,b),h(c,u,b),h(c,i,b),h(c,a,b),G(s,a,null),h(c,f,b),h(c,d,b),G(y,d,null),h(c,g,b),h(c,A,b),G(w,A,null),_=!0},p(c,[b]){const L={};b&4&&(L.username=c[2]),b&8&&(L.token=c[3]),l.$set(L);const B={};b&2&&(B.url=c[1]),s.$set(B),(!_||b&16&&m!==(m=c[4]===0))&&(a.open=m);const J={};b&2&&(J.url=c[1]),b&4&&(J.username=c[2]),b&8&&(J.token=c[3]),y.$set(J),(!_||b&16&&$!==($=c[4]===1))&&(d.open=$);const oe={};b&1&&(oe.encryptDataPromise=c[0]),b&2&&(oe.url=c[1]),w.$set(oe),(!_||b&16&&v!==(v=c[4]===2))&&(A.open=v)},i(c){_||(K(l.$$.fragment,c),K(s.$$.fragment,c),K(y.$$.fragment,c),K(w.$$.fragment,c),_=!0)},o(c){z(l.$$.fragment,c),z(s.$$.fragment,c),z(y.$$.fragment,c),z(w.$$.fragment,c),_=!1},d(c){c&&p(e),c&&p(n),c&&p(r),H(l),c&&p(o),c&&p(u),c&&p(i),c&&p(a),H(s),c&&p(f),c&&p(d),H(y),c&&p(g),c&&p(A),H(w)}}}function vt(t,e,n){var r;let l=new Promise(()=>{}),o=(r=globalThis.location)===null||r===void 0?void 0:r.hash.slice(1),u="",i="";function a(f,d){n(2,u=f),n(3,i=d)}let s=o?1:0;addEventListener("hashchange",()=>{var f;n(1,o=(f=globalThis.location)===null||f===void 0?void 0:f.hash.slice(1)),n(4,s=o?Math.max(s,1):0)});function m(f){n(0,l=f),f.then(()=>{n(4,s=2)},()=>{n(4,s=Math.min(s,1))})}return[l,o,u,i,s,a,m]}class gt extends Y{constructor(e){super(),W(this,e,vt,wt,q,{})}}new gt({target:document.getElementById("app")});
