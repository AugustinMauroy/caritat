var Ae=Object.defineProperty;var Se=(t,e,n)=>e in t?Ae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ie=(t,e,n)=>(Se(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const s of l.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();function R(){}function Pe(t){return!!t&&(typeof t=="object"||typeof t=="function")&&typeof t.then=="function"}function we(t){return t()}function me(){return Object.create(null)}function V(t){t.forEach(we)}function ve(t){return typeof t=="function"}function q(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Re(t){return Object.keys(t).length===0}function $(t,e){t.appendChild(e)}function p(t,e,n){t.insertBefore(e,n||null)}function h(t){t.parentNode&&t.parentNode.removeChild(t)}function b(t){return document.createElement(t)}function P(t){return document.createTextNode(t)}function S(){return P(" ")}function ne(){return P("")}function re(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function C(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Le(t){return Array.from(t.childNodes)}function le(t,e){e=""+e,t.data!==e&&(t.data=e)}let H;function U(t){H=t}function ke(){if(!H)throw new Error("Function called outside component initialization");return H}function $e(t){ke().$$.before_update.push(t)}const M=[],he=[];let G=[];const pe=[],Ue=Promise.resolve();let ce=!1;function Ie(){ce||(ce=!0,Ue.then(fe))}function ae(t){G.push(t)}const se=new Set;let N=0;function fe(){if(N!==0)return;const t=H;do{try{for(;N<M.length;){const e=M[N];N++,U(e),Be(e.$$)}}catch(e){throw M.length=0,N=0,e}for(U(null),M.length=0,N=0;he.length;)he.pop()();for(let e=0;e<G.length;e+=1){const n=G[e];se.has(n)||(se.add(n),n())}G.length=0}while(M.length);for(;pe.length;)pe.pop()();ce=!1,se.clear(),U(t)}function Be(t){if(t.fragment!==null){t.update(),V(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ae)}}function Fe(t){const e=[],n=[];G.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),G=e}const ee=new Set;let F;function Te(){F={r:0,c:[],p:F}}function Ne(){F.r||V(F.c),F=F.p}function z(t,e){t&&t.i&&(ee.delete(t),t.i(e))}function O(t,e,n,r){if(t&&t.o){if(ee.has(t))return;ee.add(t),F.c.push(()=>{ee.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function B(t,e){const n=e.token={};function r(o,l,s,i){if(e.token!==n)return;e.resolved=i;let a=e.ctx;s!==void 0&&(a=a.slice(),a[s]=i);const u=o&&(e.current=o)(a);let m=!1;e.block&&(e.blocks?e.blocks.forEach((f,d)=>{d!==l&&f&&(Te(),O(f,1,1,()=>{e.blocks[d]===f&&(e.blocks[d]=null)}),Ne())}):e.block.d(1),u.c(),z(u,1),u.m(e.mount(),e.anchor),m=!0),e.block=u,e.blocks&&(e.blocks[l]=u),m&&fe()}if(Pe(t)){const o=ke();if(t.then(l=>{U(o),r(e.then,1,e.value,l),U(null)},l=>{if(U(o),r(e.catch,2,e.error,l),U(null),!e.hasCatch)throw l}),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,t),!0;e.resolved=t}}function de(t,e,n){const r=e.slice(),{resolved:o}=t;t.current===t.then&&(r[t.value]=o),t.current===t.catch&&(r[t.error]=o),t.block.p(r,n)}function Q(t){t&&t.c()}function j(t,e,n){const{fragment:r,after_update:o}=t.$$;r&&r.m(e,n),ae(()=>{const l=t.$$.on_mount.map(we).filter(ve);t.$$.on_destroy?t.$$.on_destroy.push(...l):V(l),t.$$.on_mount=[]}),o.forEach(ae)}function D(t,e){const n=t.$$;n.fragment!==null&&(Fe(n.after_update),V(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function xe(t,e){t.$$.dirty[0]===-1&&(M.push(t),Ie(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function J(t,e,n,r,o,l,s=null,i=[-1]){const a=H;U(t);const u=t.$$={fragment:null,ctx:[],props:l,update:R,not_equal:o,bound:me(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:me(),dirty:i,skip_bound:!1,root:e.target||a.$$.root};s&&s(u.root);let m=!1;if(u.ctx=n?n(t,e.props||{},(f,d,..._)=>{const E=_.length?_[0]:d;return u.ctx&&o(u.ctx[f],u.ctx[f]=E)&&(!u.skip_bound&&u.bound[f]&&u.bound[f](E),m&&xe(t,f)),d}):[],u.update(),m=!0,V(u.before_update),u.fragment=r?r(u.ctx):!1,e.target){if(e.hydrate){const f=Le(e.target);u.fragment&&u.fragment.l(f),f.forEach(h)}else u.fragment&&u.fragment.c();e.intro&&z(t.$$.fragment),j(t,e.target,e.anchor),fe()}U(a)}class Y{constructor(){ie(this,"$$");ie(this,"$$set")}$destroy(){D(this,1),this.$destroy=R}$on(e,n){if(!ve(n))return R;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const o=r.indexOf(n);o!==-1&&r.splice(o,1)}}$set(e){this.$$set&&!Re(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Me="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Me);const Ke=/^\/([^/]+)\/([^/]+)\/pull\/(\d+)\/?$/,ze=/\npreferences:[^\n\S]*(#[^\n]*)?\n/,X=t=>t.ok?t.json():Promise.reject(new Error(`Fetch error: ${t.status} ${t.statusText}`,{cause:t})),Ce=new Map;async function Ge(t,e){var v;const n=new URL(t);if(n.origin!=="https://github.com")throw new Error("Only GitHub PR URLs are supported on the web UI. Use the CLI instead.");const r=Ke.exec(n.pathname);if(r==null)throw new Error("Only GitHub PR URLs are supported on the web UI. Use the CLI instead.");const[,o,l,s]=r;let i;if((v=e==null?void 0:e.headers)!=null&&v.Authorization){const c=await fetch("https://api.github.com/graphql",{...e,method:"POST",body:JSON.stringify({variables:{prid:Number(s),owner:o,repo:l},query:`query PR($prid: Int!, $owner: String!, $repo: String!) {
        repository(owner: $owner, name: $repo) {
          pullRequest(number: $prid) {
            commits(first: 1) {
              nodes {
                commit {
                  oid
                }
              }
            }
            headRef {
              name
              repository { url }
            }
            closed
            merged
          }
        }
      }
`})}).then(X);if(c.error)throw new Error("Unable to get required information for the vote PR",{cause:c.error});i=c.data.repository.pullRequest}else{const c=await Promise.all([fetch(`https://api.github.com/repos/${o}/${l}/pulls/${s}`,e).then(X),fetch(`https://api.github.com/repos/${o}/${l}/pulls/${s}/commits?per_page=1`,e).then(X)]);i={closed:c[0].state==="closed",merged:c[0].state==="merged",headRef:{name:c[0].head.ref,repository:{url:c[0].head.repo.html_url}},commits:{nodes:[{commit:{oid:c[1][0].sha}}]}}}const{closed:a,merged:u,commits:m,headRef:f}=i;if(a)throw new Error("The PR is marked as closed");if(u)throw new Error("The PR is marked as merged");const{oid:d}=m.nodes[0].commit,{name:_,repository:{url:E}}=f,{files:k}=await fetch(`https://api.github.com/repos/${o}/${l}/commits/${d}`,e).then(X);if((k==null?void 0:k.length)!==3)throw new Error("That PR does not look like a vote PR");const A=k.find(c=>c.filename==="vote.yml"||c.filename.endsWith("/vote.yml")),g=k.find(c=>c.filename===A.filename.slice(0,-8)+"ballot.yml"),w=k.find(c=>c.filename===A.filename.slice(0,-8)+"public.pem");if(!A||!g||!w)throw new Error("That PR does not look like a vote PR");return Ce.set(t,`${E}/new/${_}/${A.filename.replace(/vote\.yml$/,"")}`),{voteFile:A,ballotFile:g,publicKeyFile:w}}function _e(t){return Ce.get(t)}function Oe(t){let e=t.length,n;for(;e!=0;)n=Math.floor(Math.random()*e),e--,[t[e],t[n]]=[t[n],t[e]];return t}async function je(t,e){const n={...e,headers:{...e==null?void 0:e.headers,Accept:"application/vnd.github.raw"}};try{const{voteFile:r,ballotFile:o,publicKeyFile:l}=await Ge(t,e),s=/^\+canShuffleCandidates:\s*true$/m.test(r.patch);return[fetch(o.contents_url,n).then(i=>i.ok?i.text():Promise.reject(new Error(`Fetch error: ${i.status} ${i.statusText}`))).then(s?i=>{const a=ze.exec(i);if(a==null)return console.warn("Cannot find the list of candidates to shuffle, ignoring..."),i;const u=a.index+a[0].length-1,m=[];let f,d,_=u;for(;;){if(d=_+1,_=i.indexOf(`
`,d),_===-1){d!==i.length&&(f+=i.slice(d-1));break}if(i[d]!==" "||i[d+1]!==" ")break;i[d+2]==="-"&&(f&&m.push(f),f=""),f+=i.slice(d-1,_)}return f&&m.push(f),i.slice(0,u)+Oe(m).join("")+`
`+i.slice(d)}:void 0),fetch(l.contents_url,n).then(i=>i.ok?i.arrayBuffer():Promise.reject(new Error(`Fetch error: ${i.status} ${i.statusText}`)))]}catch(r){const o=Promise.reject(r);return[o,o]}}let ue;function De({url:t,username:e,token:n},r){const o=e&&n?{headers:{Authorization:`Basic ${btoa(`${e}:${n}`)}`}}:void 0,l=t+(o==null?void 0:o.headers.Authorization);ue!==l&&(ue=l,je(t,o).then(r,s=>(ue=null,r(s))))}function He(t){var o;let e,n=(((o=t[6])==null?void 0:o.message)??t[6])+"",r;return{c(){e=P("An error occurred: "),r=P(n)},m(l,s){p(l,e,s),p(l,r,s)},p(l,s){var i;s&1&&n!==(n=(((i=l[6])==null?void 0:i.message)??l[6])+"")&&le(r,n)},d(l){l&&(h(e),h(r))}}}function Ve(t){let e,n,r,o,l,s,i,a,u,m,f,d,_,E,k,A,g={ctx:t,current:null,token:null,hasCatch:!0,pending:Ye,then:Je,catch:qe,error:6};return B(l=t[2],g),{c(){e=b("textarea"),r=S(),o=b("div"),g.block.c(),s=S(),i=b("button"),i.textContent="Copy to clipboard",a=S(),u=b("p"),m=P("Cast a vote by pasting this on a "),f=b("a"),d=P("new file on the vote branch"),E=P("."),e.readOnly=!0,e.value=n=t[5],C(i,"type","button"),C(f,"href",_=_e(t[1])),C(f,"target","_blank")},m(w,v){p(w,e,v),p(w,r,v),p(w,o,v),g.block.m(o,g.anchor=null),g.mount=()=>o,g.anchor=null,p(w,s,v),p(w,i,v),p(w,a,v),p(w,u,v),$(u,m),$(u,f),$(f,d),$(u,E),k||(A=re(i,"click",t[4]),k=!0)},p(w,v){t=w,v&1&&n!==(n=t[5])&&(e.value=n),g.ctx=t,v&4&&l!==(l=t[2])&&B(l,g)||de(g,t,v),v&2&&_!==(_=_e(t[1]))&&C(f,"href",_)},d(w){w&&(h(e),h(r),h(o),h(s),h(i),h(a),h(u)),g.block.d(),g.token=null,g=null,k=!1,A()}}}function qe(t){let e,n=t[3]&&ye(t);return{c(){n&&n.c(),e=ne()},m(r,o){n&&n.m(r,o),p(r,e,o)},p(r,o){r[3]?n?n.p(r,o):(n=ye(r),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(r){r&&h(e),n&&n.d(r)}}}function ye(t){var o;let e,n=(((o=t[6])==null?void 0:o.message)??t[6])+"",r;return{c(){e=P("An error occurred: "),r=P(n)},m(l,s){p(l,e,s),p(l,r,s)},p(l,s){var i;s&4&&n!==(n=(((i=l[6])==null?void 0:i.message)??l[6])+"")&&le(r,n)},d(l){l&&(h(e),h(r))}}}function Je(t){let e;return{c(){e=P("Copied to the clipboard!")},m(n,r){p(n,e,r)},p:R,d(n){n&&h(e)}}}function Ye(t){let e;return{c(){e=P("Copying to the Clipboard…")},m(n,r){p(n,e,r)},p:R,d(n){n&&h(e)}}}function We(t){let e;return{c(){e=b("textarea"),e.readOnly=!0,e.value="Encrypting data… "},m(n,r){p(n,e,r)},p:R,d(n){n&&h(e)}}}function Qe(t){let e,n,r,o,l={ctx:t,current:null,token:null,hasCatch:!0,pending:We,then:Ve,catch:He,value:5,error:6};return B(o=t[0],l),{c(){e=b("summary"),e.textContent="Get encrypted ballot",n=S(),r=ne(),l.block.c()},m(s,i){p(s,e,i),p(s,n,i),p(s,r,i),l.block.m(s,l.anchor=i),l.mount=()=>r.parentNode,l.anchor=r},p(s,[i]){t=s,l.ctx=t,i&1&&o!==(o=t[0])&&B(o,l)||de(l,t,i)},i:R,o:R,d(s){s&&(h(e),h(n),h(r)),l.block.d(s),l.token=null,l=null}}}function Xe(t,e,n){let{encryptDataPromise:r}=e,{url:o}=e,l,s;function i(a){n(2,l=r.then(u=>navigator.clipboard.writeText(u))),n(3,s=a!=null)}return $e(i),t.$$set=a=>{"encryptDataPromise"in a&&n(0,r=a.encryptDataPromise),"url"in a&&n(1,o=a.url)},[r,o,l,s,i]}class Ze extends Y{constructor(e){super(),J(this,e,Xe,Qe,q,{encryptDataPromise:0,url:1})}}const Ee={name:"RSA-OAEP",hash:"SHA-256"},K={name:"AES-CBC",length:256,saltSize:8},x={name:"PBKDF2",hash:"SHA-256",iterations:1e5,keySize:32,ivSize:16},et=crypto,{subtle:I}=crypto;async function tt(t,e,...n){const r=await I.importKey("raw",t,x.name,!1,["deriveBits"]),o=await I.deriveBits({...x,salt:e},r,8*(x.ivSize+x.keySize)),l=await I.importKey("raw",new Uint8Array(o,0,x.keySize),K,!1,n),s=new Uint8Array(o,x.keySize);return{key:l,iv:s}}const nt=new TextDecoder;function rt(t){const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let r=0,o=t.length;r<o;r++)n[r]=t.charCodeAt(r);return e}const te="-----BEGIN P";function lt(t){const e=ArrayBuffer.isView(t),n=new DataView(e?t.buffer:t,e?t.byteOffset:0,te.length);for(let r=0;r<te.length;r++)if(te.charCodeAt(r)!==n.getUint8(r))return!1;return!0}function ot(t,e,n){let r;if(typeof e=="string"?e.startsWith(te):lt(e)){typeof e!="string"&&(e=nt.decode(e));const o=e.split("-----",3)[2].replace(/\s+/g,""),l=atob(o);r=rt(l)}else r=e;return I.importKey(t,r,Ee,!0,n)}function it(t,e){return ot(e?"pkcs8":"spki",t,[e?"decrypt":"encrypt"])}const Z=[83,97,108,116,101,100,95,95];async function st(t){const e=await I.exportKey("raw",await I.generateKey(K,!0,["encrypt"])),n=et.getRandomValues(new Uint8Array(K.saltSize)),{iv:r,key:o}=await tt(e,n,"encrypt"),l=await I.encrypt({...K,iv:r},o,t),s=new Uint8Array(Z.length+K.saltSize+l.byteLength);return s.set(Z),s.set(n,Z.length),s.set(new Uint8Array(l),Z.length+K.saltSize),{secret:e,saltedCiphertext:s}}async function ut(t,e){const n=await it(e),{saltedCiphertext:r,secret:o}=await st(t);return{encryptedSecret:await I.encrypt({name:Ee.name},n,o),saltedCiphertext:r}}function be(t){let e="";const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=t.byteLength,o=r%3,l=r-o;let s,i,a,u,m;for(let f=0;f<l;f=f+3)m=t[f]<<16|t[f+1]<<8|t[f+2],s=(m&16515072)>>18,i=(m&258048)>>12,a=(m&4032)>>6,u=m&63,e+=n[s]+n[i]+n[a]+n[u];return o===1?(m=t[l],s=(m&252)>>2,i=(m&3)<<4,e+=n[s]+n[i]+"=="):o===2&&(m=t[l]<<8|t[l+1],s=(m&64512)>>10,i=(m&1008)>>4,a=(m&15)<<2,e+=n[s]+n[i]+n[a]+"="),e}function ct(t){var a;let e,n,r=(((a=t[10])==null?void 0:a.message)??t[10])+"",o,l,s,i=(!t[1]||!t[0])&&ge();return{c(){e=b("p"),n=P("An error occurred: "),o=P(r),l=S(),i&&i.c(),s=ne()},m(u,m){p(u,e,m),$(e,n),$(e,o),p(u,l,m),i&&i.m(u,m),p(u,s,m)},p(u,m){var f;m&4&&r!==(r=(((f=u[10])==null?void 0:f.message)??u[10])+"")&&le(o,r),!u[1]||!u[0]?i||(i=ge(),i.c(),i.m(s.parentNode,s)):i&&(i.d(1),i=null)},d(u){u&&(h(e),h(l),h(s)),i&&i.d(u)}}}function ge(t){let e;return{c(){e=b("p"),e.textContent=`Maybe consider providing an access token, authenticated API calls are more
      likely to succeed.`},m(n,r){p(n,e,r)},d(n){n&&h(e)}}}function at(t){let e,n,r,o,l,s,i,a={ctx:t,current:null,token:null,hasCatch:!1,pending:mt,then:dt,catch:ft};return B(l=t[3],a),{c(){e=b("form"),n=b("textarea"),o=S(),a.block.c(),C(n,"name","ballot"),n.value=r=t[9]},m(u,m){p(u,e,m),$(e,n),$(e,o),a.block.m(e,a.anchor=null),a.mount=()=>e,a.anchor=null,s||(i=re(e,"submit",t[4]),s=!0)},p(u,m){t=u,m&4&&r!==(r=t[9])&&(n.value=r),a.ctx=t,m&8&&l!==(l=t[3])&&B(l,a)},d(u){u&&h(e),a.block.d(),a.token=null,a=null,s=!1,i()}}}function ft(t){return{c:R,m:R,d:R}}function dt(t){let e;return{c(){e=b("button"),e.textContent="Encrypt ballot",C(e,"type","submit")},m(n,r){p(n,e,r)},d(n){n&&h(e)}}}function mt(t){let e;return{c(){e=b("button"),e.textContent="Loading public key…",C(e,"type","submit"),e.disabled=!0},m(n,r){p(n,e,r)},d(n){n&&h(e)}}}function ht(t){let e,n,r=(t[0]||"anonymous")+"",o;return{c(){e=b("p"),n=P("...loading as "),o=P(r)},m(l,s){p(l,e,s),$(e,n),$(e,o)},p(l,s){s&1&&r!==(r=(l[0]||"anonymous")+"")&&le(o,r)},d(l){l&&h(e)}}}function pt(t){let e,n,r,o,l={ctx:t,current:null,token:null,hasCatch:!0,pending:ht,then:at,catch:ct,value:9,error:10};return B(o=t[2],l),{c(){e=b("summary"),e.textContent="Fill in ballot",n=S(),r=ne(),l.block.c()},m(s,i){p(s,e,i),p(s,n,i),p(s,r,i),l.block.m(s,l.anchor=i),l.mount=()=>r.parentNode,l.anchor=r},p(s,[i]){t=s,l.ctx=t,i&4&&o!==(o=t[2])&&B(o,l)||de(l,t,i)},i:R,o:R,d(s){s&&(h(e),h(n),h(r)),l.block.d(s),l.token=null,l=null}}}function _t(t,e,n){var r=this&&this.__awaiter||function(d,_,E,k){function A(g){return g instanceof E?g:new E(function(w){w(g)})}return new(E||(E=Promise))(function(g,w){function v(L){try{y(k.next(L))}catch(T){w(T)}}function c(L){try{y(k.throw(L))}catch(T){w(T)}}function y(L){L.done?g(L.value):A(L.value).then(v,c)}y((k=k.apply(d,_||[])).next())})};let{url:o,username:l,token:s,registerEncryptedBallot:i}=e,a,u;const m=typeof TextEncoder>"u"?{encode(){}}:new TextEncoder;function f(d){d.preventDefault();const _=this.elements.namedItem("ballot");i((()=>r(this,void 0,void 0,function*(){const{encryptedSecret:E,saltedCiphertext:k}=yield ut(m.encode(_.value),yield u);return JSON.stringify({encryptedSecret:be(new Uint8Array(E)),data:be(k)})}))())}return a=u=Promise.reject("no data"),$e(()=>{De({url:o,username:l,token:s},d=>{n(2,[a,u]=d,a,n(3,u))})}),t.$$set=d=>{"url"in d&&n(5,o=d.url),"username"in d&&n(0,l=d.username),"token"in d&&n(1,s=d.token),"registerEncryptedBallot"in d&&n(6,i=d.registerEncryptedBallot)},[l,s,a,u,f,o,i]}class yt extends Y{constructor(e){super(),J(this,e,_t,pt,q,{url:5,username:0,token:1,registerEncryptedBallot:6})}}function bt(t){let e,n,r,o,l,s,i,a,u,m,f,d,_,E,k,A,g,w,v;return{c(){e=b("summary"),e.textContent="GitHub credentials",n=S(),r=b("p"),r.textContent=`If you are trying to vote on a private repository, or hitting GitHub API rate
  limits, you can supply a token for the API calls.`,o=S(),l=b("form"),s=b("div"),i=b("label"),a=P(`Username:
      `),u=b("input"),m=S(),f=b("label"),d=P(`Token:
      `),_=b("input"),E=S(),k=b("button"),k.textContent="Save",A=S(),g=b("p"),g.innerHTML="The token should have at least the <code>repo</code> permissions.",C(u,"name","username"),u.value=t[0],C(i,"class","svelte-ttd1cx"),C(_,"name","token"),_.value=t[1],C(_,"type","password"),C(_,"placeholder","gho_…"),C(f,"class","svelte-ttd1cx"),C(k,"type","submit"),C(s,"class","svelte-ttd1cx"),C(l,"class","svelte-ttd1cx")},m(c,y){p(c,e,y),p(c,n,y),p(c,r,y),p(c,o,y),p(c,l,y),$(l,s),$(s,i),$(i,a),$(i,u),$(s,m),$(s,f),$(f,d),$(f,_),$(s,E),$(s,k),p(c,A,y),p(c,g,y),w||(v=re(l,"submit",t[2]),w=!0)},p(c,[y]){y&1&&u.value!==c[0]&&(u.value=c[0]),y&2&&_.value!==c[1]&&(_.value=c[1])},i:R,o:R,d(c){c&&(h(e),h(n),h(r),h(o),h(l),h(A),h(g)),w=!1,v()}}}function gt(t,e,n){let{updateAuth:r,username:o,token:l}=e;function s(i){i.preventDefault(),r(this.username.value,this.token.value)}return t.$$set=i=>{"updateAuth"in i&&n(3,r=i.updateAuth),"username"in i&&n(0,o=i.username),"token"in i&&n(1,l=i.token)},[o,l,s,r]}class wt extends Y{constructor(e){super(),J(this,e,gt,bt,q,{updateAuth:3,username:0,token:1})}}function vt(t){let e,n,r,o,l,s,i,a,u,m,f;return{c(){e=b("summary"),e.textContent="Get URL to load the data",n=S(),r=b("form"),o=b("div"),l=b("label"),s=P(`URL:
      `),i=b("input"),a=S(),u=b("input"),C(i,"type","url"),i.value=t[0],C(i,"name","url"),C(i,"class","svelte-bptx4u"),C(l,"class","svelte-bptx4u"),C(u,"type","submit"),u.value="Load data",C(o,"class","svelte-bptx4u"),C(r,"class","svelte-bptx4u")},m(d,_){p(d,e,_),p(d,n,_),p(d,r,_),$(r,o),$(o,l),$(l,s),$(l,i),$(o,a),$(o,u),m||(f=re(r,"submit",kt),m=!0)},p(d,[_]){_&1&&i.value!==d[0]&&(i.value=d[0])},i:R,o:R,d(d){d&&(h(e),h(n),h(r)),m=!1,f()}}}function kt(t){t.preventDefault(),globalThis.location.hash=this.elements.namedItem("url").value}function $t(t,e,n){let{url:r}=e;return t.$$set=o=>{"url"in o&&n(0,r=o.url)},[r]}class Ct extends Y{constructor(e){super(),J(this,e,$t,vt,q,{url:0})}}function Et(t){let e,n,r,o,l,s,i,a,u,m,f,d,_,E,k,A,g,w,v;return o=new wt({props:{updateAuth:t[5],username:t[2],token:t[3]}}),u=new Ct({props:{url:t[1]}}),_=new yt({props:{url:t[1],username:t[2],token:t[3],registerEncryptedBallot:t[6]}}),g=new Ze({props:{encryptDataPromise:t[0],url:t[1]}}),{c(){e=b("h1"),e.textContent="Caritat",n=S(),r=b("details"),Q(o.$$.fragment),l=S(),s=b("hr"),i=S(),a=b("details"),Q(u.$$.fragment),f=S(),d=b("details"),Q(_.$$.fragment),k=S(),A=b("details"),Q(g.$$.fragment),a.open=m=t[4]===0,d.open=E=t[4]===1,A.open=w=t[4]===2},m(c,y){p(c,e,y),p(c,n,y),p(c,r,y),j(o,r,null),p(c,l,y),p(c,s,y),p(c,i,y),p(c,a,y),j(u,a,null),p(c,f,y),p(c,d,y),j(_,d,null),p(c,k,y),p(c,A,y),j(g,A,null),v=!0},p(c,[y]){const L={};y&4&&(L.username=c[2]),y&8&&(L.token=c[3]),o.$set(L);const T={};y&2&&(T.url=c[1]),u.$set(T),(!v||y&16&&m!==(m=c[4]===0))&&(a.open=m);const W={};y&2&&(W.url=c[1]),y&4&&(W.username=c[2]),y&8&&(W.token=c[3]),_.$set(W),(!v||y&16&&E!==(E=c[4]===1))&&(d.open=E);const oe={};y&1&&(oe.encryptDataPromise=c[0]),y&2&&(oe.url=c[1]),g.$set(oe),(!v||y&16&&w!==(w=c[4]===2))&&(A.open=w)},i(c){v||(z(o.$$.fragment,c),z(u.$$.fragment,c),z(_.$$.fragment,c),z(g.$$.fragment,c),v=!0)},o(c){O(o.$$.fragment,c),O(u.$$.fragment,c),O(_.$$.fragment,c),O(g.$$.fragment,c),v=!1},d(c){c&&(h(e),h(n),h(r),h(l),h(s),h(i),h(a),h(f),h(d),h(k),h(A)),D(o),D(u),D(_),D(g)}}}function At(t,e,n){var r;let o=new Promise(()=>{}),l=(r=globalThis.location)===null||r===void 0?void 0:r.hash.slice(1),s="",i="";function a(f,d){n(2,s=f),n(3,i=d)}let u=l?1:0;addEventListener("hashchange",()=>{var f;n(1,l=(f=globalThis.location)===null||f===void 0?void 0:f.hash.slice(1)),n(4,u=l?Math.max(u,1):0)});function m(f){n(0,o=f),f.then(()=>{n(4,u=2)},()=>{n(4,u=Math.min(u,1))})}return[o,l,s,i,u,a,m]}class St extends Y{constructor(e){super(),J(this,e,At,Et,q,{})}}new St({target:document.getElementById("app")});
