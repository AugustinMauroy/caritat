(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(l){if(l.ep)return;l.ep=!0;const o=n(l);fetch(l.href,o)}})();function R(){}function $e(t){return!!t&&(typeof t=="object"||typeof t=="function")&&typeof t.then=="function"}function be(t){return t()}function fe(){return Object.create(null)}function V(t){t.forEach(be)}function ke(t){return typeof t=="function"}function q(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Ce(t){return Object.keys(t).length===0}function E(t,e){t.appendChild(e)}function _(t,e,n){t.insertBefore(e,n||null)}function h(t){t.parentNode&&t.parentNode.removeChild(t)}function y(t){return document.createElement(t)}function S(t){return document.createTextNode(t)}function P(){return S(" ")}function te(){return S("")}function ne(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function A(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Ae(t){return Array.from(t.childNodes)}function re(t,e){e=""+e,t.data!==e&&(t.data=e)}let H;function U(t){H=t}function we(){if(!H)throw new Error("Function called outside component initialization");return H}function ve(t){we().$$.before_update.push(t)}const M=[],de=[];let x=[];const me=[],Pe=Promise.resolve();let ue=!1;function Se(){ue||(ue=!0,Pe.then(ce))}function se(t){x.push(t)}const le=new Set;let N=0;function ce(){if(N!==0)return;const t=H;do{try{for(;N<M.length;){const e=M[N];N++,U(e),Re(e.$$)}}catch(e){throw M.length=0,N=0,e}for(U(null),M.length=0,N=0;de.length;)de.pop()();for(let e=0;e<x.length;e+=1){const n=x[e];le.has(n)||(le.add(n),n())}x.length=0}while(M.length);for(;me.length;)me.pop()();ue=!1,le.clear(),U(t)}function Re(t){if(t.fragment!==null){t.update(),V(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(se)}}function Le(t){const e=[],n=[];x.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),x=e}const Z=new Set;let T;function Ue(){T={r:0,c:[],p:T}}function Fe(){T.r||V(T.c),T=T.p}function j(t,e){t&&t.i&&(Z.delete(t),t.i(e))}function z(t,e,n,r){if(t&&t.o){if(Z.has(t))return;Z.add(t),T.c.push(()=>{Z.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function I(t,e){const n=e.token={};function r(l,o,u,i){if(e.token!==n)return;e.resolved=i;let c=e.ctx;u!==void 0&&(c=c.slice(),c[u]=i);const s=l&&(e.current=l)(c);let m=!1;e.block&&(e.blocks?e.blocks.forEach((p,a)=>{a!==o&&p&&(Ue(),z(p,1,1,()=>{e.blocks[a]===p&&(e.blocks[a]=null)}),Fe())}):e.block.d(1),s.c(),j(s,1),s.m(e.mount(),e.anchor),m=!0),e.block=s,e.blocks&&(e.blocks[o]=s),m&&ce()}if($e(t)){const l=we();if(t.then(o=>{U(l),r(e.then,1,e.value,o),U(null)},o=>{if(U(l),r(e.catch,2,e.error,o),U(null),!e.hasCatch)throw o}),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,t),!0;e.resolved=t}}function ae(t,e,n){const r=e.slice(),{resolved:l}=t;t.current===t.then&&(r[t.value]=l),t.current===t.catch&&(r[t.error]=l),t.block.p(r,n)}function Q(t){t&&t.c()}function G(t,e,n,r){const{fragment:l,after_update:o}=t.$$;l&&l.m(e,n),r||se(()=>{const u=t.$$.on_mount.map(be).filter(ke);t.$$.on_destroy?t.$$.on_destroy.push(...u):V(u),t.$$.on_mount=[]}),o.forEach(se)}function D(t,e){const n=t.$$;n.fragment!==null&&(Le(n.after_update),V(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Ie(t,e){t.$$.dirty[0]===-1&&(M.push(t),Se(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function W(t,e,n,r,l,o,u,i=[-1]){const c=H;U(t);const s=t.$$={fragment:null,ctx:[],props:o,update:R,not_equal:l,bound:fe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:fe(),dirty:i,skip_bound:!1,root:e.target||c.$$.root};u&&u(s.root);let m=!1;if(s.ctx=n?n(t,e.props||{},(p,a,...b)=>{const $=b.length?b[0]:a;return s.ctx&&l(s.ctx[p],s.ctx[p]=$)&&(!s.skip_bound&&s.bound[p]&&s.bound[p]($),m&&Ie(t,p)),a}):[],s.update(),m=!0,V(s.before_update),s.fragment=r?r(s.ctx):!1,e.target){if(e.hydrate){const p=Ae(e.target);s.fragment&&s.fragment.l(p),p.forEach(h)}else s.fragment&&s.fragment.c();e.intro&&j(t.$$.fragment),G(t,e.target,e.anchor,e.customElement),ce()}U(c)}class Y{$destroy(){D(this,1),this.$destroy=R}$on(e,n){if(!ke(n))return R;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const l=r.indexOf(n);l!==-1&&r.splice(l,1)}}$set(e){this.$$set&&!Ce(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Te=/^\/([^/]+)\/([^/]+)\/pull\/(\d+)\/?$/,ge=new Map;async function Be(t,e){const n=new URL(t);if(n.origin!=="https://github.com")throw new Error("Only GitHub PR URLs are supported on the web UI. Use the CLI instead.");const r=Te.exec(n.pathname);if(r==null)throw new Error("Only GitHub PR URLs are supported on the web UI. Use the CLI instead.");const[,l,o,u]=r,i=await fetch("https://api.github.com/graphql",{...e,method:"POST",body:JSON.stringify({variables:{prid:Number(u),owner:l,repo:o},query:`query PR($prid: Int!, $owner: String!, $repo: String!) {
        repository(owner: $owner, name: $repo) {
          pullRequest(number: $prid) {
            commits(first: 1) {
              nodes {
                commit {
                  oid
                }
              }
            }
            headRef {
              name
              repository { url }
            }
            closed
            merged
          }
        }
      }
`})}).then(f=>f.ok?f.json():Promise.reject(new Error(`Fetch error: ${f.status} ${f.statusText}`,{cause:f})));if(i.error)throw new Error("Unable to get required information for the vote PR",{cause:i.error});const{closed:c,merged:s,commits:m,headRef:p}=i.data.repository.pullRequest;if(c)throw new Error("The PR is marked as closed");if(s)throw new Error("The PR is marked as merged");const{oid:a}=m.nodes[0].commit,{name:b,repository:{url:$}}=p,{files:g}=await fetch(`https://api.github.com/repos/${l}/${o}/commits/${a}`,e).then(f=>f.ok?f.json():Promise.reject(new Error(`Fetch error: ${f.status} ${f.statusText}`,{cause:f})));if((g==null?void 0:g.length)!==3)throw new Error("That PR does not look like a vote PR");const C=g.find(f=>f.filename.endsWith("/vote.yml")),k=g.find(f=>f.filename.endsWith("/ballot.yml")),w=g.find(f=>f.filename.endsWith("/public.pem"));if(!C||!k||!w)throw new Error("That PR does not look like a vote PR");return ge.set(t,`${$}/new/${b}/${C.filename.replace(/vote\.yml$/,"")}`),{voteFile:C,ballotFile:k,publicKeyFile:w}}function pe(t){return ge.get(t)}function Ne(t){let e=t.length,n;for(;e!=0;)n=Math.floor(Math.random()*e),e--,[t[e],t[n]]=[t[n],t[e]];return t}async function Oe(t,e){const n={...e,headers:{...e==null?void 0:e.headers,Accept:"application/vnd.github.raw"}};try{const{voteFile:r,ballotFile:l,publicKeyFile:o}=await Be(t,e),u=/^\+canShuffleCandidates:\s*true$/m.test(r.patch);return[fetch(l.contents_url,n).then(i=>i.ok?i.text():Promise.reject(new Error(`Fetch error: ${i.status} ${i.statusText}`))).then(u?i=>{let c=0,s=i.indexOf(`
`),m;const p=[];let a,b=!1;for(;s!==-1;){if(b){if(i[c]!==" "||i[c+1]!==" ")break;i[c+2]==="-"&&(a&&p.push(a),a=""),a+=i.slice(c-1,s)}else i.slice(c,s)==="preferences:"&&(b=!0,m=s);c=s+1,s=i.indexOf(`
`,c)}return a&&p.push(a),i.slice(0,m)+Ne(p).join("")+`
`+i.slice(c)}:void 0),fetch(o.contents_url,n).then(i=>i.ok?i.arrayBuffer():Promise.reject(new Error(`Fetch error: ${i.status} ${i.statusText}`)))]}catch(r){return r=Promise.reject(r),[r,r]}}let ie;function Me({url:t,username:e,token:n},r){const l=e&&n?{headers:{Authorization:`Basic ${btoa(`${e}:${n}`)}`}}:void 0,o=t+(l==null?void 0:l.headers.Authorization);ie!==o&&(ie=o,Oe(t,l).then(r,u=>(ie=null,r(u))))}function Ke(t){var l;let e,n=(((l=t[6])==null?void 0:l.message)??t[6])+"",r;return{c(){e=S("An error occurred: "),r=S(n)},m(o,u){_(o,e,u),_(o,r,u)},p(o,u){var i;u&1&&n!==(n=(((i=o[6])==null?void 0:i.message)??o[6])+"")&&re(r,n)},d(o){o&&h(e),o&&h(r)}}}function je(t){let e,n,r,l,o,u,i,c,s,m,p,a,b,$,g,C,k={ctx:t,current:null,token:null,hasCatch:!0,pending:Ge,then:ze,catch:xe,error:6};return I(o=t[2],k),{c(){e=y("textarea"),r=P(),l=y("div"),k.block.c(),u=P(),i=y("button"),i.textContent="Copy to clipboard",c=P(),s=y("p"),m=S("Cast a vote by pasting this on a "),p=y("a"),a=S("new file on the vote branch"),$=S("."),e.readOnly=!0,e.value=n=t[5],A(i,"type","button"),A(p,"href",b=pe(t[1])),A(p,"target","_blank")},m(w,f){_(w,e,f),_(w,r,f),_(w,l,f),k.block.m(l,k.anchor=null),k.mount=()=>l,k.anchor=null,_(w,u,f),_(w,i,f),_(w,c,f),_(w,s,f),E(s,m),E(s,p),E(p,a),E(s,$),g||(C=ne(i,"click",t[4]),g=!0)},p(w,f){t=w,f&1&&n!==(n=t[5])&&(e.value=n),k.ctx=t,f&4&&o!==(o=t[2])&&I(o,k)||ae(k,t,f),f&2&&b!==(b=pe(t[1]))&&A(p,"href",b)},d(w){w&&h(e),w&&h(r),w&&h(l),k.block.d(),k.token=null,k=null,w&&h(u),w&&h(i),w&&h(c),w&&h(s),g=!1,C()}}}function xe(t){let e,n=t[3]&&he(t);return{c(){n&&n.c(),e=te()},m(r,l){n&&n.m(r,l),_(r,e,l)},p(r,l){r[3]?n?n.p(r,l):(n=he(r),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(r){n&&n.d(r),r&&h(e)}}}function he(t){var l;let e,n=(((l=t[6])==null?void 0:l.message)??t[6])+"",r;return{c(){e=S("An error occurred: "),r=S(n)},m(o,u){_(o,e,u),_(o,r,u)},p(o,u){var i;u&4&&n!==(n=(((i=o[6])==null?void 0:i.message)??o[6])+"")&&re(r,n)},d(o){o&&h(e),o&&h(r)}}}function ze(t){let e;return{c(){e=S("Copied to the clipboard!")},m(n,r){_(n,e,r)},p:R,d(n){n&&h(e)}}}function Ge(t){let e;return{c(){e=S("Copying to the Clipboard…")},m(n,r){_(n,e,r)},p:R,d(n){n&&h(e)}}}function De(t){let e;return{c(){e=y("textarea"),e.readOnly=!0,e.value="Encrypting data… "},m(n,r){_(n,e,r)},p:R,d(n){n&&h(e)}}}function He(t){let e,n,r,l,o={ctx:t,current:null,token:null,hasCatch:!0,pending:De,then:je,catch:Ke,value:5,error:6};return I(l=t[0],o),{c(){e=y("summary"),e.textContent="Get encrypted ballot",n=P(),r=te(),o.block.c()},m(u,i){_(u,e,i),_(u,n,i),_(u,r,i),o.block.m(u,o.anchor=i),o.mount=()=>r.parentNode,o.anchor=r},p(u,[i]){t=u,o.ctx=t,i&1&&l!==(l=t[0])&&I(l,o)||ae(o,t,i)},i:R,o:R,d(u){u&&h(e),u&&h(n),u&&h(r),o.block.d(u),o.token=null,o=null}}}function Ve(t,e,n){let{encryptDataPromise:r}=e,{url:l}=e,o,u;function i(c){n(2,o=r.then(s=>navigator.clipboard.writeText(s))),n(3,u=c!=null)}return ve(i),t.$$set=c=>{"encryptDataPromise"in c&&n(0,r=c.encryptDataPromise),"url"in c&&n(1,l=c.url)},[r,l,o,u,i]}class qe extends Y{constructor(e){super(),W(this,e,Ve,He,q,{encryptDataPromise:0,url:1})}}const Ee={name:"RSA-OAEP",hash:"SHA-256"},K={name:"AES-CBC",length:256,saltSize:8},O={name:"PBKDF2",hash:"SHA-256",iterations:1e5,keySize:32,ivSize:16},We=crypto,{subtle:F}=crypto;async function Ye(t,e,...n){const r=await F.importKey("raw",t,O.name,!1,["deriveBits"]),l=await F.deriveBits({...O,salt:e},r,8*(O.ivSize+O.keySize)),o=await F.importKey("raw",new Uint8Array(l,0,O.keySize),K,!1,n),u=new Uint8Array(l,O.keySize);return{key:o,iv:u}}const Je=new TextDecoder;function Qe(t){const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let r=0,l=t.length;r<l;r++)n[r]=t.charCodeAt(r);return e}const ee="-----BEGIN P";function Xe(t){const e=ArrayBuffer.isView(t),n=new DataView(e?t.buffer:t,e?t.byteOffset:0,ee.length);for(let r=0;r<ee.length;r++)if(ee.charCodeAt(r)!==n.getUint8(r))return!1;return!0}function Ze(t,e,n){let r;if(typeof e=="string"?e.startsWith(ee):Xe(e)){typeof e!="string"&&(e=Je.decode(e));const l=e.split("-----",3)[2].replace(/\s+/g,""),o=atob(l);r=Qe(o)}else r=e;return F.importKey(t,r,Ee,!0,n)}function et(t,e){return Ze(e?"pkcs8":"spki",t,[e?"decrypt":"encrypt"])}const X=[83,97,108,116,101,100,95,95];async function tt(t){const e=await F.exportKey("raw",await F.generateKey(K,!0,["encrypt"])),n=We.getRandomValues(new Uint8Array(K.saltSize)),{iv:r,key:l}=await Ye(e,n,"encrypt"),o=await F.encrypt({...K,iv:r},l,t),u=new Uint8Array(X.length+K.saltSize+o.byteLength);return u.set(X),u.set(n,X.length),u.set(new Uint8Array(o),X.length+K.saltSize),{secret:e,saltedCiphertext:u}}async function nt(t,e){const n=await et(e),{saltedCiphertext:r,secret:l}=await tt(t);return{encryptedSecret:await F.encrypt({name:Ee.name},n,l),saltedCiphertext:r}}function _e(t){for(var e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=t.byteLength,l=r%3,o=r-l,u,i,c,s,m,p=0;p<o;p=p+3)m=t[p]<<16|t[p+1]<<8|t[p+2],u=(m&16515072)>>18,i=(m&258048)>>12,c=(m&4032)>>6,s=m&63,e+=n[u]+n[i]+n[c]+n[s];return l==1?(m=t[o],u=(m&252)>>2,i=(m&3)<<4,e+=n[u]+n[i]+"=="):l==2&&(m=t[o]<<8|t[o+1],u=(m&64512)>>10,i=(m&1008)>>4,c=(m&15)<<2,e+=n[u]+n[i]+n[c]+"="),e}function rt(t){var c;let e,n,r=(((c=t[10])==null?void 0:c.message)??t[10])+"",l,o,u,i=(!t[1]||!t[0])&&ye();return{c(){e=y("p"),n=S("An error occurred: "),l=S(r),o=P(),i&&i.c(),u=te()},m(s,m){_(s,e,m),E(e,n),E(e,l),_(s,o,m),i&&i.m(s,m),_(s,u,m)},p(s,m){var p;m&4&&r!==(r=(((p=s[10])==null?void 0:p.message)??s[10])+"")&&re(l,r),!s[1]||!s[0]?i||(i=ye(),i.c(),i.m(u.parentNode,u)):i&&(i.d(1),i=null)},d(s){s&&h(e),s&&h(o),i&&i.d(s),s&&h(u)}}}function ye(t){let e;return{c(){e=y("p"),e.textContent=`Maybe consider providing an access token, authenticated API calls are more
      likely to succeed.`},m(n,r){_(n,e,r)},d(n){n&&h(e)}}}function ot(t){let e,n,r,l,o,u,i,c={ctx:t,current:null,token:null,hasCatch:!1,pending:ut,then:it,catch:lt};return I(o=t[3],c),{c(){e=y("form"),n=y("textarea"),l=P(),c.block.c(),A(n,"name","ballot"),n.value=r=t[9]},m(s,m){_(s,e,m),E(e,n),E(e,l),c.block.m(e,c.anchor=null),c.mount=()=>e,c.anchor=null,u||(i=ne(e,"submit",t[4]),u=!0)},p(s,m){t=s,m&4&&r!==(r=t[9])&&(n.value=r),c.ctx=t,m&8&&o!==(o=t[3])&&I(o,c)},d(s){s&&h(e),c.block.d(),c.token=null,c=null,u=!1,i()}}}function lt(t){return{c:R,m:R,d:R}}function it(t){let e;return{c(){e=y("button"),e.textContent="Encrypt ballot",A(e,"type","submit")},m(n,r){_(n,e,r)},d(n){n&&h(e)}}}function ut(t){let e;return{c(){e=y("button"),e.textContent="Loading public key…",A(e,"type","submit"),e.disabled=!0},m(n,r){_(n,e,r)},d(n){n&&h(e)}}}function st(t){let e,n,r=(t[0]||"anonymous")+"",l;return{c(){e=y("p"),n=S("...loading as "),l=S(r)},m(o,u){_(o,e,u),E(e,n),E(e,l)},p(o,u){u&1&&r!==(r=(o[0]||"anonymous")+"")&&re(l,r)},d(o){o&&h(e)}}}function ct(t){let e,n,r,l,o={ctx:t,current:null,token:null,hasCatch:!0,pending:st,then:ot,catch:rt,value:9,error:10};return I(l=t[2],o),{c(){e=y("summary"),e.textContent="Fill in ballot",n=P(),r=te(),o.block.c()},m(u,i){_(u,e,i),_(u,n,i),_(u,r,i),o.block.m(u,o.anchor=i),o.mount=()=>r.parentNode,o.anchor=r},p(u,[i]){t=u,o.ctx=t,i&4&&l!==(l=t[2])&&I(l,o)||ae(o,t,i)},i:R,o:R,d(u){u&&h(e),u&&h(n),u&&h(r),o.block.d(u),o.token=null,o=null}}}function at(t,e,n){var r=this&&this.__awaiter||function(a,b,$,g){function C(k){return k instanceof $?k:new $(function(w){w(k)})}return new($||($=Promise))(function(k,w){function f(L){try{v(g.next(L))}catch(B){w(B)}}function d(L){try{v(g.throw(L))}catch(B){w(B)}}function v(L){L.done?k(L.value):C(L.value).then(f,d)}v((g=g.apply(a,b||[])).next())})};let{url:l,username:o,token:u,registerEncryptedBallot:i}=e,c,s;const m=typeof TextEncoder>"u"?{encode(){}}:new TextEncoder;function p(a){a.preventDefault();const b=this.elements.namedItem("ballot");i((()=>r(this,void 0,void 0,function*(){const{encryptedSecret:$,saltedCiphertext:g}=yield nt(m.encode(b.value),yield s);return JSON.stringify({encryptedSecret:_e(new Uint8Array($)),data:_e(g)})}))())}return c=s=Promise.reject("no data"),ve(()=>{Me({url:l,username:o,token:u},a=>{n(2,[c,s]=a,c,n(3,s))})}),t.$$set=a=>{"url"in a&&n(5,l=a.url),"username"in a&&n(0,o=a.username),"token"in a&&n(1,u=a.token),"registerEncryptedBallot"in a&&n(6,i=a.registerEncryptedBallot)},[o,u,c,s,p,l,i]}class ft extends Y{constructor(e){super(),W(this,e,at,ct,q,{url:5,username:0,token:1,registerEncryptedBallot:6})}}function dt(t){let e,n,r,l,o,u,i,c,s,m,p,a,b,$,g,C,k,w;return{c(){e=y("summary"),e.textContent="GitHub credentials",n=P(),r=y("p"),r.textContent=`If you are trying to vote on a private repository, or hitting GitHub API rate
  limits, you can supply a token for the API calls.`,l=P(),o=y("form"),u=y("label"),i=S(`Username:
    `),c=y("input"),s=P(),m=y("label"),p=S(`Token:
    `),a=y("input"),b=P(),$=y("button"),$.textContent="Save",g=P(),C=y("p"),C.innerHTML="The token should have at least the <code>repo</code> permissions.",A(c,"name","username"),c.value=t[0],A(a,"name","token"),a.value=t[1],A(a,"type","password"),A(a,"placeholder","gho_…"),A($,"type","submit")},m(f,d){_(f,e,d),_(f,n,d),_(f,r,d),_(f,l,d),_(f,o,d),E(o,u),E(u,i),E(u,c),E(o,s),E(o,m),E(m,p),E(m,a),E(o,b),E(o,$),_(f,g,d),_(f,C,d),k||(w=ne(o,"submit",t[2]),k=!0)},p(f,[d]){d&1&&c.value!==f[0]&&(c.value=f[0]),d&2&&a.value!==f[1]&&(a.value=f[1])},i:R,o:R,d(f){f&&h(e),f&&h(n),f&&h(r),f&&h(l),f&&h(o),f&&h(g),f&&h(C),k=!1,w()}}}function mt(t,e,n){let{updateAuth:r,username:l,token:o}=e;function u(i){i.preventDefault(),r(this.username.value,this.token.value)}return t.$$set=i=>{"updateAuth"in i&&n(3,r=i.updateAuth),"username"in i&&n(0,l=i.username),"token"in i&&n(1,o=i.token)},[l,o,u,r]}class pt extends Y{constructor(e){super(),W(this,e,mt,dt,q,{updateAuth:3,username:0,token:1})}}function ht(t){let e,n,r,l,o,u,i,c,s,m,p;return{c(){e=y("summary"),e.textContent="Get URL to load the data",n=P(),r=y("form"),l=y("div"),o=y("label"),u=S(`URL:
      `),i=y("input"),c=P(),s=y("input"),A(i,"type","url"),i.value=t[0],A(i,"name","url"),A(i,"class","svelte-xat9pf"),A(o,"class","svelte-xat9pf"),A(s,"type","submit"),s.value="Load data",A(l,"class","svelte-xat9pf"),A(r,"class","svelte-xat9pf")},m(a,b){_(a,e,b),_(a,n,b),_(a,r,b),E(r,l),E(l,o),E(o,u),E(o,i),E(l,c),E(l,s),m||(p=ne(r,"submit",_t),m=!0)},p(a,[b]){b&1&&i.value!==a[0]&&(i.value=a[0])},i:R,o:R,d(a){a&&h(e),a&&h(n),a&&h(r),m=!1,p()}}}function _t(t){t.preventDefault(),globalThis.location.hash=this.elements.namedItem("url").value}function yt(t,e,n){let{url:r}=e;return t.$$set=l=>{"url"in l&&n(0,r=l.url)},[r]}class bt extends Y{constructor(e){super(),W(this,e,yt,ht,q,{url:0})}}function kt(t){let e,n,r,l,o,u,i,c,s,m,p,a,b,$,g,C,k,w,f;return l=new pt({props:{updateAuth:t[5],username:t[2],token:t[3]}}),s=new bt({props:{url:t[1]}}),b=new ft({props:{url:t[1],username:t[2],token:t[3],registerEncryptedBallot:t[6]}}),k=new qe({props:{encryptDataPromise:t[0],url:t[1]}}),{c(){e=y("h1"),e.textContent="Caritat",n=P(),r=y("details"),Q(l.$$.fragment),o=P(),u=y("hr"),i=P(),c=y("details"),Q(s.$$.fragment),p=P(),a=y("details"),Q(b.$$.fragment),g=P(),C=y("details"),Q(k.$$.fragment),c.open=m=t[4]===0,a.open=$=t[4]===1,C.open=w=t[4]===2},m(d,v){_(d,e,v),_(d,n,v),_(d,r,v),G(l,r,null),_(d,o,v),_(d,u,v),_(d,i,v),_(d,c,v),G(s,c,null),_(d,p,v),_(d,a,v),G(b,a,null),_(d,g,v),_(d,C,v),G(k,C,null),f=!0},p(d,[v]){const L={};v&4&&(L.username=d[2]),v&8&&(L.token=d[3]),l.$set(L);const B={};v&2&&(B.url=d[1]),s.$set(B),(!f||v&16&&m!==(m=d[4]===0))&&(c.open=m);const J={};v&2&&(J.url=d[1]),v&4&&(J.username=d[2]),v&8&&(J.token=d[3]),b.$set(J),(!f||v&16&&$!==($=d[4]===1))&&(a.open=$);const oe={};v&1&&(oe.encryptDataPromise=d[0]),v&2&&(oe.url=d[1]),k.$set(oe),(!f||v&16&&w!==(w=d[4]===2))&&(C.open=w)},i(d){f||(j(l.$$.fragment,d),j(s.$$.fragment,d),j(b.$$.fragment,d),j(k.$$.fragment,d),f=!0)},o(d){z(l.$$.fragment,d),z(s.$$.fragment,d),z(b.$$.fragment,d),z(k.$$.fragment,d),f=!1},d(d){d&&h(e),d&&h(n),d&&h(r),D(l),d&&h(o),d&&h(u),d&&h(i),d&&h(c),D(s),d&&h(p),d&&h(a),D(b),d&&h(g),d&&h(C),D(k)}}}function wt(t,e,n){var r;let l=new Promise(()=>{}),o=(r=globalThis.location)===null||r===void 0?void 0:r.hash.slice(1),u="",i="";function c(p,a){n(2,u=p),n(3,i=a)}let s=o?1:0;addEventListener("hashchange",()=>{var p;n(1,o=(p=globalThis.location)===null||p===void 0?void 0:p.hash.slice(1)),n(4,s=o?Math.max(s,1):0)});function m(p){n(0,l=p),p.then(()=>{n(4,s=2)},()=>{n(4,s=Math.min(s,1))})}return[l,o,u,i,s,c,m]}class vt extends Y{constructor(e){super(),W(this,e,wt,kt,q,{})}}new vt({target:document.getElementById("app")});
